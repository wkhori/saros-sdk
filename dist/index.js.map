{"version":3,"sources":["../../../node_modules/buffer-layout/lib/Layout.js","../../../node_modules/@coral-xyz/borsh/src/index.ts","../src/types/pair.ts","../src/constants/config.ts","../src/constants/idl/amm.json","../src/services/base/index.ts","../src/utils/calculations.ts","../src/utils/pda.ts","../src/utils/errors.ts","../src/utils/legacyAccountDecoder.ts","../src/services/pair.ts","../src/services/createPair.ts","../src/services/index.ts","../src/constants/idl/farm.ts","../src/services/api.ts","../src/services/farm.ts"],"names":["span","u64","publicKey","vecU8","SwapCurveType","MODE","PublicKey","SarosAMMErrorCode","BN","spl","Transaction","AnchorProvider","Program","spl3","SystemProgram"],"mappings":"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","file":"index.js","sourcesContent":["/* The MIT License (MIT)\n *\n * Copyright 2015-2018 Peter A. Bigot\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Support for translating between Buffer instances and JavaScript\n * native types.\n *\n * {@link module:Layout~Layout|Layout} is the basis of a class\n * hierarchy that associates property names with sequences of encoded\n * bytes.\n *\n * Layouts are supported for these scalar (numeric) types:\n * * {@link module:Layout~UInt|Unsigned integers in little-endian\n *   format} with {@link module:Layout.u8|8-bit}, {@link\n *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},\n *   {@link module:Layout.u32|32-bit}, {@link\n *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}\n *   representation ranges;\n * * {@link module:Layout~UIntBE|Unsigned integers in big-endian\n *   format} with {@link module:Layout.u16be|16-bit}, {@link\n *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},\n *   {@link module:Layout.u40be|40-bit}, and {@link\n *   module:Layout.u48be|48-bit} representation ranges;\n * * {@link module:Layout~Int|Signed integers in little-endian\n *   format} with {@link module:Layout.s8|8-bit}, {@link\n *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},\n *   {@link module:Layout.s32|32-bit}, {@link\n *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}\n *   representation ranges;\n * * {@link module:Layout~IntBE|Signed integers in big-endian format}\n *   with {@link module:Layout.s16be|16-bit}, {@link\n *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},\n *   {@link module:Layout.s40be|40-bit}, and {@link\n *   module:Layout.s48be|48-bit} representation ranges;\n * * 64-bit integral values that decode to an exact (if magnitude is\n *   less than 2^53) or nearby integral Number in {@link\n *   module:Layout.nu64|unsigned little-endian}, {@link\n *   module:Layout.nu64be|unsigned big-endian}, {@link\n *   module:Layout.ns64|signed little-endian}, and {@link\n *   module:Layout.ns64be|unsigned big-endian} encodings;\n * * 32-bit floating point values with {@link\n *   module:Layout.f32|little-endian} and {@link\n *   module:Layout.f32be|big-endian} representations;\n * * 64-bit floating point values with {@link\n *   module:Layout.f64|little-endian} and {@link\n *   module:Layout.f64be|big-endian} representations;\n * * {@link module:Layout.const|Constants} that take no space in the\n *   encoded expression.\n *\n * and for these aggregate types:\n * * {@link module:Layout.seq|Sequence}s of instances of a {@link\n *   module:Layout~Layout|Layout}, with JavaScript representation as\n *   an Array and constant or data-dependent {@link\n *   module:Layout~Sequence#count|length};\n * * {@link module:Layout.struct|Structure}s that aggregate a\n *   heterogeneous sequence of {@link module:Layout~Layout|Layout}\n *   instances, with JavaScript representation as an Object;\n * * {@link module:Layout.union|Union}s that support multiple {@link\n *   module:Layout~VariantLayout|variant layouts} over a fixed\n *   (padded) or variable (not padded) span of bytes, using an\n *   unsigned integer at the start of the data or a separate {@link\n *   module:Layout.unionLayoutDiscriminator|layout element} to\n *   determine which layout to use when interpreting the buffer\n *   contents;\n * * {@link module:Layout.bits|BitStructure}s that contain a sequence\n *   of individual {@link\n *   module:Layout~BitStructure#addField|BitField}s packed into an 8,\n *   16, 24, or 32-bit unsigned integer starting at the least- or\n *   most-significant bit;\n * * {@link module:Layout.cstr|C strings} of varying length;\n * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link\n *   module:Layout~Blob#length|length} raw data.\n *\n * All {@link module:Layout~Layout|Layout} instances are immutable\n * after construction, to prevent internal state from becoming\n * inconsistent.\n *\n * @local Layout\n * @local ExternalLayout\n * @local GreedyCount\n * @local OffsetLayout\n * @local UInt\n * @local UIntBE\n * @local Int\n * @local IntBE\n * @local NearUInt64\n * @local NearUInt64BE\n * @local NearInt64\n * @local NearInt64BE\n * @local Float\n * @local FloatBE\n * @local Double\n * @local DoubleBE\n * @local Sequence\n * @local Structure\n * @local UnionDiscriminator\n * @local UnionLayoutDiscriminator\n * @local Union\n * @local VariantLayout\n * @local BitStructure\n * @local BitField\n * @local Boolean\n * @local Blob\n * @local CString\n * @local Constant\n * @local bindConstructorLayout\n * @module Layout\n * @license MIT\n * @author Peter A. Bigot\n * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}\n */\n\n'use strict';\n\n/**\n * Base class for layout objects.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support the {@link\n * Layout#encode|encode} or {@link Layout#decode|decode} functions.\n *\n * @param {Number} span - Initializer for {@link Layout#span|span}.  The\n * parameter must be an integer; a negative value signifies that the\n * span is {@link Layout#getSpan|value-specific}.\n *\n * @param {string} [property] - Initializer for {@link\n * Layout#property|property}.\n *\n * @abstract\n */\nclass Layout {\n  constructor(span, property) {\n    if (!Number.isInteger(span)) {\n      throw new TypeError('span must be an integer');\n    }\n\n    /** The span of the layout in bytes.\n     *\n     * Positive values are generally expected.\n     *\n     * Zero will only appear in {@link Constant}s and in {@link\n     * Sequence}s where the {@link Sequence#count|count} is zero.\n     *\n     * A negative value indicates that the span is value-specific, and\n     * must be obtained using {@link Layout#getSpan|getSpan}. */\n    this.span = span;\n\n    /** The property name used when this layout is represented in an\n     * Object.\n     *\n     * Used only for layouts that {@link Layout#decode|decode} to Object\n     * instances.  If left undefined the span of the unnamed layout will\n     * be treated as padding: it will not be mutated by {@link\n     * Layout#encode|encode} nor represented as a property in the\n     * decoded Object. */\n    this.property = property;\n  }\n\n  /** Function to create an Object into which decoded properties will\n   * be written.\n   *\n   * Used only for layouts that {@link Layout#decode|decode} to Object\n   * instances, which means:\n   * * {@link Structure}\n   * * {@link Union}\n   * * {@link VariantLayout}\n   * * {@link BitStructure}\n   *\n   * If left undefined the JavaScript representation of these layouts\n   * will be Object instances.\n   *\n   * See {@link bindConstructorLayout}.\n   */\n  makeDestinationObject() {\n    return {};\n  }\n\n  /**\n   * Decode from a Buffer into an JavaScript value.\n   *\n   * @param {Buffer} b - the buffer from which encoded data is read.\n   *\n   * @param {Number} [offset] - the offset at which the encoded data\n   * starts.  If absent a zero offset is inferred.\n   *\n   * @returns {(Number|Array|Object)} - the value of the decoded data.\n   *\n   * @abstract\n   */\n  decode(b, offset) {\n    throw new Error('Layout is abstract');\n  }\n\n  /**\n   * Encode a JavaScript value into a Buffer.\n   *\n   * @param {(Number|Array|Object)} src - the value to be encoded into\n   * the buffer.  The type accepted depends on the (sub-)type of {@link\n   * Layout}.\n   *\n   * @param {Buffer} b - the buffer into which encoded data will be\n   * written.\n   *\n   * @param {Number} [offset] - the offset at which the encoded data\n   * starts.  If absent a zero offset is inferred.\n   *\n   * @returns {Number} - the number of bytes encoded, including the\n   * space skipped for internal padding, but excluding data such as\n   * {@link Sequence#count|lengths} when stored {@link\n   * ExternalLayout|externally}.  This is the adjustment to `offset`\n   * producing the offset where data for the next layout would be\n   * written.\n   *\n   * @abstract\n   */\n  encode(src, b, offset) {\n    throw new Error('Layout is abstract');\n  }\n\n  /**\n   * Calculate the span of a specific instance of a layout.\n   *\n   * @param {Buffer} b - the buffer that contains an encoded instance.\n   *\n   * @param {Number} [offset] - the offset at which the encoded instance\n   * starts.  If absent a zero offset is inferred.\n   *\n   * @return {Number} - the number of bytes covered by the layout\n   * instance.  If this method is not overridden in a subclass the\n   * definition-time constant {@link Layout#span|span} will be\n   * returned.\n   *\n   * @throws {RangeError} - if the length of the value cannot be\n   * determined.\n   */\n  getSpan(b, offset) {\n    if (0 > this.span) {\n      throw new RangeError('indeterminate span');\n    }\n    return this.span;\n  }\n\n  /**\n   * Replicate the layout using a new property.\n   *\n   * This function must be used to get a structurally-equivalent layout\n   * with a different name since all {@link Layout} instances are\n   * immutable.\n   *\n   * **NOTE** This is a shallow copy.  All fields except {@link\n   * Layout#property|property} are strictly equal to the origin layout.\n   *\n   * @param {String} property - the value for {@link\n   * Layout#property|property} in the replica.\n   *\n   * @returns {Layout} - the copy with {@link Layout#property|property}\n   * set to `property`.\n   */\n  replicate(property) {\n    const rv = Object.create(this.constructor.prototype);\n    Object.assign(rv, this);\n    rv.property = property;\n    return rv;\n  }\n\n  /**\n   * Create an object from layout properties and an array of values.\n   *\n   * **NOTE** This function returns `undefined` if invoked on a layout\n   * that does not return its value as an Object.  Objects are\n   * returned for things that are a {@link Structure}, which includes\n   * {@link VariantLayout|variant layouts} if they are structures, and\n   * excludes {@link Union}s.  If you want this feature for a union\n   * you must use {@link Union.getVariant|getVariant} to select the\n   * desired layout.\n   *\n   * @param {Array} values - an array of values that correspond to the\n   * default order for properties.  As with {@link Layout#decode|decode}\n   * layout elements that have no property name are skipped when\n   * iterating over the array values.  Only the top-level properties are\n   * assigned; arguments are not assigned to properties of contained\n   * layouts.  Any unused values are ignored.\n   *\n   * @return {(Object|undefined)}\n   */\n  fromArray(values) {\n    return undefined;\n  }\n}\nexports.Layout = Layout;\n\n/* Provide text that carries a name (such as for a function that will\n * be throwing an error) annotated with the property of a given layout\n * (such as one for which the value was unacceptable).\n *\n * @ignore */\nfunction nameWithProperty(name, lo) {\n  if (lo.property) {\n    return name + '[' + lo.property + ']';\n  }\n  return name;\n}\nexports.nameWithProperty = nameWithProperty;\n\n/**\n * Augment a class so that instances can be encoded/decoded using a\n * given layout.\n *\n * Calling this function couples `Class` with `layout` in several ways:\n *\n * * `Class.layout_` becomes a static member property equal to `layout`;\n * * `layout.boundConstructor_` becomes a static member property equal\n *    to `Class`;\n * * The {@link Layout#makeDestinationObject|makeDestinationObject()}\n *   property of `layout` is set to a function that returns a `new\n *   Class()`;\n * * `Class.decode(b, offset)` becomes a static member function that\n *   delegates to {@link Layout#decode|layout.decode}.  The\n *   synthesized function may be captured and extended.\n * * `Class.prototype.encode(b, offset)` provides an instance member\n *   function that delegates to {@link Layout#encode|layout.encode}\n *   with `src` set to `this`.  The synthesized function may be\n *   captured and extended, but when the extension is invoked `this`\n *   must be explicitly bound to the instance.\n *\n * @param {class} Class - a JavaScript class with a nullary\n * constructor.\n *\n * @param {Layout} layout - the {@link Layout} instance used to encode\n * instances of `Class`.\n */\nfunction bindConstructorLayout(Class, layout) {\n  if ('function' !== typeof Class) {\n    throw new TypeError('Class must be constructor');\n  }\n  if (Class.hasOwnProperty('layout_')) {\n    throw new Error('Class is already bound to a layout');\n  }\n  if (!(layout && (layout instanceof Layout))) {\n    throw new TypeError('layout must be a Layout');\n  }\n  if (layout.hasOwnProperty('boundConstructor_')) {\n    throw new Error('layout is already bound to a constructor');\n  }\n  Class.layout_ = layout;\n  layout.boundConstructor_ = Class;\n  layout.makeDestinationObject = (() => new Class());\n  Object.defineProperty(Class.prototype, 'encode', {\n    value: function(b, offset) {\n      return layout.encode(this, b, offset);\n    },\n    writable: true,\n  });\n  Object.defineProperty(Class, 'decode', {\n    value: function(b, offset) {\n      return layout.decode(b, offset);\n    },\n    writable: true,\n  });\n}\nexports.bindConstructorLayout = bindConstructorLayout;\n\n/**\n * An object that behaves like a layout but does not consume space\n * within its containing layout.\n *\n * This is primarily used to obtain metadata about a member, such as a\n * {@link OffsetLayout} that can provide data about a {@link\n * Layout#getSpan|value-specific span}.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support {@link\n * ExternalLayout#isCount|isCount} or other {@link Layout} functions.\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @abstract\n * @augments {Layout}\n */\nclass ExternalLayout extends Layout {\n  /**\n   * Return `true` iff the external layout decodes to an unsigned\n   * integer layout.\n   *\n   * In that case it can be used as the source of {@link\n   * Sequence#count|Sequence counts}, {@link Blob#length|Blob lengths},\n   * or as {@link UnionLayoutDiscriminator#layout|external union\n   * discriminators}.\n   *\n   * @abstract\n   */\n  isCount() {\n    throw new Error('ExternalLayout is abstract');\n  }\n}\n\n/**\n * An {@link ExternalLayout} that determines its {@link\n * Layout#decode|value} based on offset into and length of the buffer\n * on which it is invoked.\n *\n * *Factory*: {@link module:Layout.greedy|greedy}\n *\n * @param {Number} [elementSpan] - initializer for {@link\n * GreedyCount#elementSpan|elementSpan}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {ExternalLayout}\n */\nclass GreedyCount extends ExternalLayout {\n  constructor(elementSpan, property) {\n    if (undefined === elementSpan) {\n      elementSpan = 1;\n    }\n    if ((!Number.isInteger(elementSpan)) || (0 >= elementSpan)) {\n      throw new TypeError('elementSpan must be a (positive) integer');\n    }\n    super(-1, property);\n\n    /** The layout for individual elements of the sequence.  The value\n     * must be a positive integer.  If not provided, the value will be\n     * 1. */\n    this.elementSpan = elementSpan;\n  }\n\n  /** @override */\n  isCount() {\n    return true;\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const rem = b.length - offset;\n    return Math.floor(rem / this.elementSpan);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    return 0;\n  }\n}\n\n/**\n * An {@link ExternalLayout} that supports accessing a {@link Layout}\n * at a fixed offset from the start of another Layout.  The offset may\n * be before, within, or after the base layout.\n *\n * *Factory*: {@link module:Layout.offset|offset}\n *\n * @param {Layout} layout - initializer for {@link\n * OffsetLayout#layout|layout}, modulo `property`.\n *\n * @param {Number} [offset] - Initializes {@link\n * OffsetLayout#offset|offset}.  Defaults to zero.\n *\n * @param {string} [property] - Optional new property name for a\n * {@link Layout#replicate| replica} of `layout` to be used as {@link\n * OffsetLayout#layout|layout}.  If not provided the `layout` is used\n * unchanged.\n *\n * @augments {Layout}\n */\nclass OffsetLayout extends ExternalLayout {\n  constructor(layout, offset, property) {\n    if (!(layout instanceof Layout)) {\n      throw new TypeError('layout must be a Layout');\n    }\n\n    if (undefined === offset) {\n      offset = 0;\n    } else if (!Number.isInteger(offset)) {\n      throw new TypeError('offset must be integer or undefined');\n    }\n\n    super(layout.span, property || layout.property);\n\n    /** The subordinated layout. */\n    this.layout = layout;\n\n    /** The location of {@link OffsetLayout#layout} relative to the\n     * start of another layout.\n     *\n     * The value may be positive or negative, but an error will thrown\n     * if at the point of use it goes outside the span of the Buffer\n     * being accessed.  */\n    this.offset = offset;\n  }\n\n  /** @override */\n  isCount() {\n    return ((this.layout instanceof UInt)\n            || (this.layout instanceof UIntBE));\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return this.layout.decode(b, offset + this.offset);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return this.layout.encode(src, b, offset + this.offset);\n  }\n}\n\n/**\n * Represent an unsigned integer in little-endian format.\n *\n * *Factory*: {@link module:Layout.u8|u8}, {@link\n *  module:Layout.u16|u16}, {@link module:Layout.u24|u24}, {@link\n *  module:Layout.u32|u32}, {@link module:Layout.u40|u40}, {@link\n *  module:Layout.u48|u48}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UInt extends Layout {\n  constructor(span, property) {\n    super(span, property);\n    if (6 < this.span) {\n      throw new RangeError('span must not exceed 6 bytes');\n    }\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readUIntLE(offset, this.span);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeUIntLE(src, offset, this.span);\n    return this.span;\n  }\n}\n\n/**\n * Represent an unsigned integer in big-endian format.\n *\n * *Factory*: {@link module:Layout.u8be|u8be}, {@link\n * module:Layout.u16be|u16be}, {@link module:Layout.u24be|u24be},\n * {@link module:Layout.u32be|u32be}, {@link\n * module:Layout.u40be|u40be}, {@link module:Layout.u48be|u48be}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UIntBE extends Layout {\n  constructor(span, property) {\n    super( span, property);\n    if (6 < this.span) {\n      throw new RangeError('span must not exceed 6 bytes');\n    }\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readUIntBE(offset, this.span);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeUIntBE(src, offset, this.span);\n    return this.span;\n  }\n}\n\n/**\n * Represent a signed integer in little-endian format.\n *\n * *Factory*: {@link module:Layout.s8|s8}, {@link\n *  module:Layout.s16|s16}, {@link module:Layout.s24|s24}, {@link\n *  module:Layout.s32|s32}, {@link module:Layout.s40|s40}, {@link\n *  module:Layout.s48|s48}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Int extends Layout {\n  constructor(span, property) {\n    super(span, property);\n    if (6 < this.span) {\n      throw new RangeError('span must not exceed 6 bytes');\n    }\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readIntLE(offset, this.span);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeIntLE(src, offset, this.span);\n    return this.span;\n  }\n}\n\n/**\n * Represent a signed integer in big-endian format.\n *\n * *Factory*: {@link module:Layout.s8be|s8be}, {@link\n * module:Layout.s16be|s16be}, {@link module:Layout.s24be|s24be},\n * {@link module:Layout.s32be|s32be}, {@link\n * module:Layout.s40be|s40be}, {@link module:Layout.s48be|s48be}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass IntBE extends Layout {\n  constructor(span, property) {\n    super(span, property);\n    if (6 < this.span) {\n      throw new RangeError('span must not exceed 6 bytes');\n    }\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readIntBE(offset, this.span);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeIntBE(src, offset, this.span);\n    return this.span;\n  }\n}\n\nconst V2E32 = Math.pow(2, 32);\n\n/* True modulus high and low 32-bit words, where low word is always\n * non-negative. */\nfunction divmodInt64(src) {\n  const hi32 = Math.floor(src / V2E32);\n  const lo32 = src - (hi32 * V2E32);\n  return {hi32, lo32};\n}\n/* Reconstruct Number from quotient and non-negative remainder */\nfunction roundedInt64(hi32, lo32) {\n  return hi32 * V2E32 + lo32;\n}\n\n/**\n * Represent an unsigned 64-bit integer in little-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.nu64|nu64}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearUInt64 extends Layout {\n  constructor(property) {\n    super(8, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const lo32 = b.readUInt32LE(offset);\n    const hi32 = b.readUInt32LE(offset + 4);\n    return roundedInt64(hi32, lo32);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const split = divmodInt64(src);\n    b.writeUInt32LE(split.lo32, offset);\n    b.writeUInt32LE(split.hi32, offset + 4);\n    return 8;\n  }\n}\n\n/**\n * Represent an unsigned 64-bit integer in big-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.nu64be|nu64be}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearUInt64BE extends Layout {\n  constructor(property) {\n    super(8, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const hi32 = b.readUInt32BE(offset);\n    const lo32 = b.readUInt32BE(offset + 4);\n    return roundedInt64(hi32, lo32);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const split = divmodInt64(src);\n    b.writeUInt32BE(split.hi32, offset);\n    b.writeUInt32BE(split.lo32, offset + 4);\n    return 8;\n  }\n}\n\n/**\n * Represent a signed 64-bit integer in little-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.ns64|ns64}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearInt64 extends Layout {\n  constructor(property) {\n    super(8, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const lo32 = b.readUInt32LE(offset);\n    const hi32 = b.readInt32LE(offset + 4);\n    return roundedInt64(hi32, lo32);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const split = divmodInt64(src);\n    b.writeUInt32LE(split.lo32, offset);\n    b.writeInt32LE(split.hi32, offset + 4);\n    return 8;\n  }\n}\n\n/**\n * Represent a signed 64-bit integer in big-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.ns64be|ns64be}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearInt64BE extends Layout {\n  constructor(property) {\n    super(8, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const hi32 = b.readInt32BE(offset);\n    const lo32 = b.readUInt32BE(offset + 4);\n    return roundedInt64(hi32, lo32);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const split = divmodInt64(src);\n    b.writeInt32BE(split.hi32, offset);\n    b.writeUInt32BE(split.lo32, offset + 4);\n    return 8;\n  }\n}\n\n/**\n * Represent a 32-bit floating point number in little-endian format.\n *\n * *Factory*: {@link module:Layout.f32|f32}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Float extends Layout {\n  constructor(property) {\n    super(4, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readFloatLE(offset);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeFloatLE(src, offset);\n    return 4;\n  }\n}\n\n/**\n * Represent a 32-bit floating point number in big-endian format.\n *\n * *Factory*: {@link module:Layout.f32be|f32be}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass FloatBE extends Layout {\n  constructor(property) {\n    super(4, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readFloatBE(offset);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeFloatBE(src, offset);\n    return 4;\n  }\n}\n\n/**\n * Represent a 64-bit floating point number in little-endian format.\n *\n * *Factory*: {@link module:Layout.f64|f64}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Double extends Layout {\n  constructor(property) {\n    super(8, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readDoubleLE(offset);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeDoubleLE(src, offset);\n    return 8;\n  }\n}\n\n/**\n * Represent a 64-bit floating point number in big-endian format.\n *\n * *Factory*: {@link module:Layout.f64be|f64be}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass DoubleBE extends Layout {\n  constructor(property) {\n    super(8, property);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.readDoubleBE(offset);\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    b.writeDoubleBE(src, offset);\n    return 8;\n  }\n}\n\n/**\n * Represent a contiguous sequence of a specific layout as an Array.\n *\n * *Factory*: {@link module:Layout.seq|seq}\n *\n * @param {Layout} elementLayout - initializer for {@link\n * Sequence#elementLayout|elementLayout}.\n *\n * @param {(Number|ExternalLayout)} count - initializer for {@link\n * Sequence#count|count}.  The parameter must be either a positive\n * integer or an instance of {@link ExternalLayout}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Sequence extends Layout {\n  constructor(elementLayout, count, property) {\n    if (!(elementLayout instanceof Layout)) {\n      throw new TypeError('elementLayout must be a Layout');\n    }\n    if (!(((count instanceof ExternalLayout) && count.isCount())\n          || (Number.isInteger(count) && (0 <= count)))) {\n      throw new TypeError('count must be non-negative integer '\n                          + 'or an unsigned integer ExternalLayout');\n    }\n    let span = -1;\n    if ((!(count instanceof ExternalLayout))\n        && (0 < elementLayout.span)) {\n      span = count * elementLayout.span;\n    }\n\n    super(span, property);\n\n    /** The layout for individual elements of the sequence. */\n    this.elementLayout = elementLayout;\n\n    /** The number of elements in the sequence.\n     *\n     * This will be either a non-negative integer or an instance of\n     * {@link ExternalLayout} for which {@link\n     * ExternalLayout#isCount|isCount()} is `true`. */\n    this.count = count;\n  }\n\n  /** @override */\n  getSpan(b, offset) {\n    if (0 <= this.span) {\n      return this.span;\n    }\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let span = 0;\n    let count = this.count;\n    if (count instanceof ExternalLayout) {\n      count = count.decode(b, offset);\n    }\n    if (0 < this.elementLayout.span) {\n      span = count * this.elementLayout.span;\n    } else {\n      let idx = 0;\n      while (idx < count) {\n        span += this.elementLayout.getSpan(b, offset + span);\n        ++idx;\n      }\n    }\n    return span;\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const rv = [];\n    let i = 0;\n    let count = this.count;\n    if (count instanceof ExternalLayout) {\n      count = count.decode(b, offset);\n    }\n    while (i < count) {\n      rv.push(this.elementLayout.decode(b, offset));\n      offset += this.elementLayout.getSpan(b, offset);\n      i += 1;\n    }\n    return rv;\n  }\n\n  /** Implement {@link Layout#encode|encode} for {@link Sequence}.\n   *\n   * **NOTE** If `src` is shorter than {@link Sequence#count|count} then\n   * the unused space in the buffer is left unchanged.  If `src` is\n   * longer than {@link Sequence#count|count} the unneeded elements are\n   * ignored.\n   *\n   * **NOTE** If {@link Layout#count|count} is an instance of {@link\n   * ExternalLayout} then the length of `src` will be encoded as the\n   * count after `src` is encoded. */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const elo = this.elementLayout;\n    const span = src.reduce((span, v) => {\n      return span + elo.encode(v, b, offset + span);\n    }, 0);\n    if (this.count instanceof ExternalLayout) {\n      this.count.encode(src.length, b, offset);\n    }\n    return span;\n  }\n}\n\n/**\n * Represent a contiguous sequence of arbitrary layout elements as an\n * Object.\n *\n * *Factory*: {@link module:Layout.struct|struct}\n *\n * **NOTE** The {@link Layout#span|span} of the structure is variable\n * if any layout in {@link Structure#fields|fields} has a variable\n * span.  When {@link Layout#encode|encoding} we must have a value for\n * all variable-length fields, or we wouldn't be able to figure out\n * how much space to use for storage.  We can only identify the value\n * for a field when it has a {@link Layout#property|property}.  As\n * such, although a structure may contain both unnamed fields and\n * variable-length fields, it cannot contain an unnamed\n * variable-length field.\n *\n * @param {Layout[]} fields - initializer for {@link\n * Structure#fields|fields}.  An error is raised if this contains a\n * variable-length field for which a {@link Layout#property|property}\n * is not defined.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @param {Boolean} [decodePrefixes] - initializer for {@link\n * Structure#decodePrefixes|property}.\n *\n * @throws {Error} - if `fields` contains an unnamed variable-length\n * layout.\n *\n * @augments {Layout}\n */\nclass Structure extends Layout {\n  constructor(fields, property, decodePrefixes) {\n    if (!(Array.isArray(fields)\n          && fields.reduce((acc, v) => acc && (v instanceof Layout), true))) {\n      throw new TypeError('fields must be array of Layout instances');\n    }\n    if (('boolean' === typeof property)\n        && (undefined === decodePrefixes)) {\n      decodePrefixes = property;\n      property = undefined;\n    }\n\n    /* Verify absence of unnamed variable-length fields. */\n    for (const fd of fields) {\n      if ((0 > fd.span)\n          && (undefined === fd.property)) {\n        throw new Error('fields cannot contain unnamed variable-length layout');\n      }\n    }\n\n    let span = -1;\n    try {\n      span = fields.reduce((span, fd) => span + fd.getSpan(), 0);\n    } catch (e) {\n    }\n    super(span, property);\n\n    /** The sequence of {@link Layout} values that comprise the\n     * structure.\n     *\n     * The individual elements need not be the same type, and may be\n     * either scalar or aggregate layouts.  If a member layout leaves\n     * its {@link Layout#property|property} undefined the\n     * corresponding region of the buffer associated with the element\n     * will not be mutated.\n     *\n     * @type {Layout[]} */\n    this.fields = fields;\n\n    /** Control behavior of {@link Layout#decode|decode()} given short\n     * buffers.\n     *\n     * In some situations a structure many be extended with additional\n     * fields over time, with older installations providing only a\n     * prefix of the full structure.  If this property is `true`\n     * decoding will accept those buffers and leave subsequent fields\n     * undefined, as long as the buffer ends at a field boundary.\n     * Defaults to `false`. */\n    this.decodePrefixes = !!decodePrefixes;\n  }\n\n  /** @override */\n  getSpan(b, offset) {\n    if (0 <= this.span) {\n      return this.span;\n    }\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let span = 0;\n    try {\n      span = this.fields.reduce((span, fd) => {\n        const fsp = fd.getSpan(b, offset);\n        offset += fsp;\n        return span + fsp;\n      }, 0);\n    } catch (e) {\n      throw new RangeError('indeterminate span');\n    }\n    return span;\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const dest = this.makeDestinationObject();\n    for (const fd of this.fields) {\n      if (undefined !== fd.property) {\n        dest[fd.property] = fd.decode(b, offset);\n      }\n      offset += fd.getSpan(b, offset);\n      if (this.decodePrefixes\n          && (b.length === offset)) {\n        break;\n      }\n    }\n    return dest;\n  }\n\n  /** Implement {@link Layout#encode|encode} for {@link Structure}.\n   *\n   * If `src` is missing a property for a member with a defined {@link\n   * Layout#property|property} the corresponding region of the buffer is\n   * left unmodified. */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const firstOffset = offset;\n    let lastOffset = 0;\n    let lastWrote = 0;\n    for (const fd of this.fields) {\n      let span = fd.span;\n      lastWrote = (0 < span) ? span : 0;\n      if (undefined !== fd.property) {\n        const fv = src[fd.property];\n        if (undefined !== fv) {\n          lastWrote = fd.encode(fv, b, offset);\n          if (0 > span) {\n            /* Read the as-encoded span, which is not necessarily the\n             * same as what we wrote. */\n            span = fd.getSpan(b, offset);\n          }\n        }\n      }\n      lastOffset = offset;\n      offset += span;\n    }\n    /* Use (lastOffset + lastWrote) instead of offset because the last\n     * item may have had a dynamic length and we don't want to include\n     * the padding between it and the end of the space reserved for\n     * it. */\n    return (lastOffset + lastWrote) - firstOffset;\n  }\n\n  /** @override */\n  fromArray(values) {\n    const dest = this.makeDestinationObject();\n    for (const fd of this.fields) {\n      if ((undefined !== fd.property)\n          && (0 < values.length)) {\n        dest[fd.property] = values.shift();\n      }\n    }\n    return dest;\n  }\n\n  /**\n   * Get access to the layout of a given property.\n   *\n   * @param {String} property - the structure member of interest.\n   *\n   * @return {Layout} - the layout associated with `property`, or\n   * undefined if there is no such property.\n   */\n  layoutFor(property) {\n    if ('string' !== typeof property) {\n      throw new TypeError('property must be string');\n    }\n    for (const fd of this.fields) {\n      if (fd.property === property) {\n        return fd;\n      }\n    }\n  }\n\n  /**\n   * Get the offset of a structure member.\n   *\n   * @param {String} property - the structure member of interest.\n   *\n   * @return {Number} - the offset in bytes to the start of `property`\n   * within the structure, or undefined if `property` is not a field\n   * within the structure.  If the property is a member but follows a\n   * variable-length structure member a negative number will be\n   * returned.\n   */\n  offsetOf(property) {\n    if ('string' !== typeof property) {\n      throw new TypeError('property must be string');\n    }\n    let offset = 0;\n    for (const fd of this.fields) {\n      if (fd.property === property) {\n        return offset;\n      }\n      if (0 > fd.span) {\n        offset = -1;\n      } else if (0 <= offset) {\n        offset += fd.span;\n      }\n    }\n  }\n}\n\n/**\n * An object that can provide a {@link\n * Union#discriminator|discriminator} API for {@link Union}.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support the {@link\n * UnionDiscriminator#encode|encode} or {@link\n * UnionDiscriminator#decode|decode} functions.\n *\n * @param {string} [property] - Default for {@link\n * UnionDiscriminator#property|property}.\n *\n * @abstract\n */\nclass UnionDiscriminator {\n  constructor(property) {\n    /** The {@link Layout#property|property} to be used when the\n     * discriminator is referenced in isolation (generally when {@link\n     * Union#decode|Union decode} cannot delegate to a specific\n     * variant). */\n    this.property = property;\n  }\n\n  /** Analog to {@link Layout#decode|Layout decode} for union discriminators.\n   *\n   * The implementation of this method need not reference the buffer if\n   * variant information is available through other means. */\n  decode() {\n    throw new Error('UnionDiscriminator is abstract');\n  }\n\n  /** Analog to {@link Layout#decode|Layout encode} for union discriminators.\n   *\n   * The implementation of this method need not store the value if\n   * variant information is maintained through other means. */\n  encode() {\n    throw new Error('UnionDiscriminator is abstract');\n  }\n}\n\n/**\n * An object that can provide a {@link\n * UnionDiscriminator|discriminator API} for {@link Union} using an\n * unsigned integral {@link Layout} instance located either inside or\n * outside the union.\n *\n * @param {ExternalLayout} layout - initializes {@link\n * UnionLayoutDiscriminator#layout|layout}.  Must satisfy {@link\n * ExternalLayout#isCount|isCount()}.\n *\n * @param {string} [property] - Default for {@link\n * UnionDiscriminator#property|property}, superseding the property\n * from `layout`, but defaulting to `variant` if neither `property`\n * nor layout provide a property name.\n *\n * @augments {UnionDiscriminator}\n */\nclass UnionLayoutDiscriminator extends UnionDiscriminator {\n  constructor(layout, property) {\n    if (!((layout instanceof ExternalLayout)\n          && layout.isCount())) {\n      throw new TypeError('layout must be an unsigned integer ExternalLayout');\n    }\n\n    super(property || layout.property || 'variant');\n\n    /** The {@link ExternalLayout} used to access the discriminator\n     * value. */\n    this.layout = layout;\n  }\n\n  /** Delegate decoding to {@link UnionLayoutDiscriminator#layout|layout}. */\n  decode(b, offset) {\n    return this.layout.decode(b, offset);\n  }\n\n  /** Delegate encoding to {@link UnionLayoutDiscriminator#layout|layout}. */\n  encode(src, b, offset) {\n    return this.layout.encode(src, b, offset);\n  }\n}\n\n/**\n * Represent any number of span-compatible layouts.\n *\n * *Factory*: {@link module:Layout.union|union}\n *\n * If the union has a {@link Union#defaultLayout|default layout} that\n * layout must have a non-negative {@link Layout#span|span}.  The span\n * of a fixed-span union includes its {@link\n * Union#discriminator|discriminator} if the variant is a {@link\n * Union#usesPrefixDiscriminator|prefix of the union}, plus the span\n * of its {@link Union#defaultLayout|default layout}.\n *\n * If the union does not have a default layout then the encoded span\n * of the union depends on the encoded span of its variant (which may\n * be fixed or variable).\n *\n * {@link VariantLayout#layout|Variant layout}s are added through\n * {@link Union#addVariant|addVariant}.  If the union has a default\n * layout, the span of the {@link VariantLayout#layout|layout\n * contained by the variant} must not exceed the span of the {@link\n * Union#defaultLayout|default layout} (minus the span of a {@link\n * Union#usesPrefixDiscriminator|prefix disriminator}, if used).  The\n * span of the variant will equal the span of the union itself.\n *\n * The variant for a buffer can only be identified from the {@link\n * Union#discriminator|discriminator} {@link\n * UnionDiscriminator#property|property} (in the case of the {@link\n * Union#defaultLayout|default layout}), or by using {@link\n * Union#getVariant|getVariant} and examining the resulting {@link\n * VariantLayout} instance.\n *\n * A variant compatible with a JavaScript object can be identified\n * using {@link Union#getSourceVariant|getSourceVariant}.\n *\n * @param {(UnionDiscriminator|ExternalLayout|Layout)} discr - How to\n * identify the layout used to interpret the union contents.  The\n * parameter must be an instance of {@link UnionDiscriminator}, an\n * {@link ExternalLayout} that satisfies {@link\n * ExternalLayout#isCount|isCount()}, or {@link UInt} (or {@link\n * UIntBE}).  When a non-external layout element is passed the layout\n * appears at the start of the union.  In all cases the (synthesized)\n * {@link UnionDiscriminator} instance is recorded as {@link\n * Union#discriminator|discriminator}.\n *\n * @param {(Layout|null)} defaultLayout - initializer for {@link\n * Union#defaultLayout|defaultLayout}.  If absent defaults to `null`.\n * If `null` there is no default layout: the union has data-dependent\n * length and attempts to decode or encode unrecognized variants will\n * throw an exception.  A {@link Layout} instance must have a\n * non-negative {@link Layout#span|span}, and if it lacks a {@link\n * Layout#property|property} the {@link\n * Union#defaultLayout|defaultLayout} will be a {@link\n * Layout#replicate|replica} with property `content`.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Union extends Layout {\n  constructor(discr, defaultLayout, property) {\n    const upv = ((discr instanceof UInt)\n               || (discr instanceof UIntBE));\n    if (upv) {\n      discr = new UnionLayoutDiscriminator(new OffsetLayout(discr));\n    } else if ((discr instanceof ExternalLayout)\n               && discr.isCount()) {\n      discr = new UnionLayoutDiscriminator(discr);\n    } else if (!(discr instanceof UnionDiscriminator)) {\n      throw new TypeError('discr must be a UnionDiscriminator '\n                          + 'or an unsigned integer layout');\n    }\n    if (undefined === defaultLayout) {\n      defaultLayout = null;\n    }\n    if (!((null === defaultLayout)\n          || (defaultLayout instanceof Layout))) {\n      throw new TypeError('defaultLayout must be null or a Layout');\n    }\n    if (null !== defaultLayout) {\n      if (0 > defaultLayout.span) {\n        throw new Error('defaultLayout must have constant span');\n      }\n      if (undefined === defaultLayout.property) {\n        defaultLayout = defaultLayout.replicate('content');\n      }\n    }\n\n    /* The union span can be estimated only if there's a default\n     * layout.  The union spans its default layout, plus any prefix\n     * variant layout.  By construction both layouts, if present, have\n     * non-negative span. */\n    let span = -1;\n    if (defaultLayout) {\n      span = defaultLayout.span;\n      if ((0 <= span) && upv) {\n        span += discr.layout.span;\n      }\n    }\n    super(span, property);\n\n    /** The interface for the discriminator value in isolation.\n     *\n     * This a {@link UnionDiscriminator} either passed to the\n     * constructor or synthesized from the `discr` constructor\n     * argument.  {@link\n     * Union#usesPrefixDiscriminator|usesPrefixDiscriminator} will be\n     * `true` iff the `discr` parameter was a non-offset {@link\n     * Layout} instance. */\n    this.discriminator = discr;\n\n    /** `true` if the {@link Union#discriminator|discriminator} is the\n     * first field in the union.\n     *\n     * If `false` the discriminator is obtained from somewhere\n     * else. */\n    this.usesPrefixDiscriminator = upv;\n\n    /** The layout for non-discriminator content when the value of the\n     * discriminator is not recognized.\n     *\n     * This is the value passed to the constructor.  It is\n     * structurally equivalent to the second component of {@link\n     * Union#layout|layout} but may have a different property\n     * name. */\n    this.defaultLayout = defaultLayout;\n\n    /** A registry of allowed variants.\n     *\n     * The keys are unsigned integers which should be compatible with\n     * {@link Union.discriminator|discriminator}.  The property value\n     * is the corresponding {@link VariantLayout} instances assigned\n     * to this union by {@link Union#addVariant|addVariant}.\n     *\n     * **NOTE** The registry remains mutable so that variants can be\n     * {@link Union#addVariant|added} at any time.  Users should not\n     * manipulate the content of this property. */\n    this.registry = {};\n\n    /* Private variable used when invoking getSourceVariant */\n    let boundGetSourceVariant = this.defaultGetSourceVariant.bind(this);\n\n    /** Function to infer the variant selected by a source object.\n     *\n     * Defaults to {@link\n     * Union#defaultGetSourceVariant|defaultGetSourceVariant} but may\n     * be overridden using {@link\n     * Union#configGetSourceVariant|configGetSourceVariant}.\n     *\n     * @param {Object} src - as with {@link\n     * Union#defaultGetSourceVariant|defaultGetSourceVariant}.\n     *\n     * @returns {(undefined|VariantLayout)} The default variant\n     * (`undefined`) or first registered variant that uses a property\n     * available in `src`. */\n    this.getSourceVariant = function(src) {\n      return boundGetSourceVariant(src);\n    };\n\n    /** Function to override the implementation of {@link\n     * Union#getSourceVariant|getSourceVariant}.\n     *\n     * Use this if the desired variant cannot be identified using the\n     * algorithm of {@link\n     * Union#defaultGetSourceVariant|defaultGetSourceVariant}.\n     *\n     * **NOTE** The provided function will be invoked bound to this\n     * Union instance, providing local access to {@link\n     * Union#registry|registry}.\n     *\n     * @param {Function} gsv - a function that follows the API of\n     * {@link Union#defaultGetSourceVariant|defaultGetSourceVariant}. */\n    this.configGetSourceVariant = function(gsv) {\n      boundGetSourceVariant = gsv.bind(this);\n    };\n  }\n\n  /** @override */\n  getSpan(b, offset) {\n    if (0 <= this.span) {\n      return this.span;\n    }\n    if (undefined === offset) {\n      offset = 0;\n    }\n    /* Default layouts always have non-negative span, so we don't have\n     * one and we have to recognize the variant which will in turn\n     * determine the span. */\n    const vlo = this.getVariant(b, offset);\n    if (!vlo) {\n      throw new Error('unable to determine span for unrecognized variant');\n    }\n    return vlo.getSpan(b, offset);\n  }\n\n  /**\n   * Method to infer a registered Union variant compatible with `src`.\n   *\n   * The first satisified rule in the following sequence defines the\n   * return value:\n   * * If `src` has properties matching the Union discriminator and\n   *   the default layout, `undefined` is returned regardless of the\n   *   value of the discriminator property (this ensures the default\n   *   layout will be used);\n   * * If `src` has a property matching the Union discriminator, the\n   *   value of the discriminator identifies a registered variant, and\n   *   either (a) the variant has no layout, or (b) `src` has the\n   *   variant's property, then the variant is returned (because the\n   *   source satisfies the constraints of the variant it identifies);\n   * * If `src` does not have a property matching the Union\n   *   discriminator, but does have a property matching a registered\n   *   variant, then the variant is returned (because the source\n   *   matches a variant without an explicit conflict);\n   * * An error is thrown (because we either can't identify a variant,\n   *   or we were explicitly told the variant but can't satisfy it).\n   *\n   * @param {Object} src - an object presumed to be compatible with\n   * the content of the Union.\n   *\n   * @return {(undefined|VariantLayout)} - as described above.\n   *\n   * @throws {Error} - if `src` cannot be associated with a default or\n   * registered variant.\n   */\n  defaultGetSourceVariant(src) {\n    if (src.hasOwnProperty(this.discriminator.property)) {\n      if (this.defaultLayout\n          && src.hasOwnProperty(this.defaultLayout.property)) {\n        return undefined;\n      }\n      const vlo = this.registry[src[this.discriminator.property]];\n      if (vlo\n          && ((!vlo.layout)\n              || src.hasOwnProperty(vlo.property))) {\n        return vlo;\n      }\n    } else {\n      for (const tag in this.registry) {\n        const vlo = this.registry[tag];\n        if (src.hasOwnProperty(vlo.property)) {\n          return vlo;\n        }\n      }\n    }\n    throw new Error('unable to infer src variant');\n  }\n\n  /** Implement {@link Layout#decode|decode} for {@link Union}.\n   *\n   * If the variant is {@link Union#addVariant|registered} the return\n   * value is an instance of that variant, with no explicit\n   * discriminator.  Otherwise the {@link Union#defaultLayout|default\n   * layout} is used to decode the content. */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let dest;\n    const dlo = this.discriminator;\n    const discr = dlo.decode(b, offset);\n    let clo = this.registry[discr];\n    if (undefined === clo) {\n      let contentOffset = 0;\n      clo = this.defaultLayout;\n      if (this.usesPrefixDiscriminator) {\n        contentOffset = dlo.layout.span;\n      }\n      dest = this.makeDestinationObject();\n      dest[dlo.property] = discr;\n      dest[clo.property] = this.defaultLayout.decode(b, offset + contentOffset);\n    } else {\n      dest = clo.decode(b, offset);\n    }\n    return dest;\n  }\n\n  /** Implement {@link Layout#encode|encode} for {@link Union}.\n   *\n   * This API assumes the `src` object is consistent with the union's\n   * {@link Union#defaultLayout|default layout}.  To encode variants\n   * use the appropriate variant-specific {@link VariantLayout#encode}\n   * method. */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const vlo = this.getSourceVariant(src);\n    if (undefined === vlo) {\n      const dlo = this.discriminator;\n      const clo = this.defaultLayout;\n      let contentOffset = 0;\n      if (this.usesPrefixDiscriminator) {\n        contentOffset = dlo.layout.span;\n      }\n      dlo.encode(src[dlo.property], b, offset);\n      return contentOffset + clo.encode(src[clo.property], b,\n                                        offset + contentOffset);\n    }\n    return vlo.encode(src, b, offset);\n  }\n\n  /** Register a new variant structure within a union.  The newly\n   * created variant is returned.\n   *\n   * @param {Number} variant - initializer for {@link\n   * VariantLayout#variant|variant}.\n   *\n   * @param {Layout} layout - initializer for {@link\n   * VariantLayout#layout|layout}.\n   *\n   * @param {String} property - initializer for {@link\n   * Layout#property|property}.\n   *\n   * @return {VariantLayout} */\n  addVariant(variant, layout, property) {\n    const rv = new VariantLayout(this, variant, layout, property);\n    this.registry[variant] = rv;\n    return rv;\n  }\n\n  /**\n   * Get the layout associated with a registered variant.\n   *\n   * If `vb` does not produce a registered variant the function returns\n   * `undefined`.\n   *\n   * @param {(Number|Buffer)} vb - either the variant number, or a\n   * buffer from which the discriminator is to be read.\n   *\n   * @param {Number} offset - offset into `vb` for the start of the\n   * union.  Used only when `vb` is an instance of {Buffer}.\n   *\n   * @return {({VariantLayout}|undefined)}\n   */\n  getVariant(vb, offset) {\n    let variant = vb;\n    if (Buffer.isBuffer(vb)) {\n      if (undefined === offset) {\n        offset = 0;\n      }\n      variant = this.discriminator.decode(vb, offset);\n    }\n    return this.registry[variant];\n  }\n}\n\n/**\n * Represent a specific variant within a containing union.\n *\n * **NOTE** The {@link Layout#span|span} of the variant may include\n * the span of the {@link Union#discriminator|discriminator} used to\n * identify it, but values read and written using the variant strictly\n * conform to the content of {@link VariantLayout#layout|layout}.\n *\n * **NOTE** User code should not invoke this constructor directly.  Use\n * the union {@link Union#addVariant|addVariant} helper method.\n *\n * @param {Union} union - initializer for {@link\n * VariantLayout#union|union}.\n *\n * @param {Number} variant - initializer for {@link\n * VariantLayout#variant|variant}.\n *\n * @param {Layout} [layout] - initializer for {@link\n * VariantLayout#layout|layout}.  If absent the variant carries no\n * data.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.  Unlike many other layouts, variant\n * layouts normally include a property name so they can be identified\n * within their containing {@link Union}.  The property identifier may\n * be absent only if `layout` is is absent.\n *\n * @augments {Layout}\n */\nclass VariantLayout extends Layout {\n  constructor(union, variant, layout, property) {\n    if (!(union instanceof Union)) {\n      throw new TypeError('union must be a Union');\n    }\n    if ((!Number.isInteger(variant)) || (0 > variant)) {\n      throw new TypeError('variant must be a (non-negative) integer');\n    }\n    if (('string' === typeof layout)\n        && (undefined === property)) {\n      property = layout;\n      layout = null;\n    }\n    if (layout) {\n      if (!(layout instanceof Layout)) {\n        throw new TypeError('layout must be a Layout');\n      }\n      if ((null !== union.defaultLayout)\n          && (0 <= layout.span)\n          && (layout.span > union.defaultLayout.span)) {\n        throw new Error('variant span exceeds span of containing union');\n      }\n      if ('string' !== typeof property) {\n        throw new TypeError('variant must have a String property');\n      }\n    }\n    let span = union.span;\n    if (0 > union.span) {\n      span = layout ? layout.span : 0;\n      if ((0 <= span) && union.usesPrefixDiscriminator) {\n        span += union.discriminator.layout.span;\n      }\n    }\n    super(span, property);\n\n    /** The {@link Union} to which this variant belongs. */\n    this.union = union;\n\n    /** The unsigned integral value identifying this variant within\n     * the {@link Union#discriminator|discriminator} of the containing\n     * union. */\n    this.variant = variant;\n\n    /** The {@link Layout} to be used when reading/writing the\n     * non-discriminator part of the {@link\n     * VariantLayout#union|union}.  If `null` the variant carries no\n     * data. */\n    this.layout = layout || null;\n  }\n\n  /** @override */\n  getSpan(b, offset) {\n    if (0 <= this.span) {\n      /* Will be equal to the containing union span if that is not\n       * variable. */\n      return this.span;\n    }\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let contentOffset = 0;\n    if (this.union.usesPrefixDiscriminator) {\n      contentOffset = this.union.discriminator.layout.span;\n    }\n    /* Span is defined solely by the variant (and prefix discriminator) */\n    return contentOffset + this.layout.getSpan(b, offset + contentOffset);\n  }\n\n  /** @override */\n  decode(b, offset) {\n    const dest = this.makeDestinationObject();\n    if (undefined === offset) {\n      offset = 0;\n    }\n    if (this !== this.union.getVariant(b, offset)) {\n      throw new Error('variant mismatch');\n    }\n    let contentOffset = 0;\n    if (this.union.usesPrefixDiscriminator) {\n      contentOffset = this.union.discriminator.layout.span;\n    }\n    if (this.layout) {\n      dest[this.property] = this.layout.decode(b, offset + contentOffset);\n    } else if (this.property) {\n      dest[this.property] = true;\n    } else if (this.union.usesPrefixDiscriminator) {\n      dest[this.union.discriminator.property] = this.variant;\n    }\n    return dest;\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let contentOffset = 0;\n    if (this.union.usesPrefixDiscriminator) {\n      contentOffset = this.union.discriminator.layout.span;\n    }\n    if (this.layout\n        && (!src.hasOwnProperty(this.property))) {\n      throw new TypeError('variant lacks property ' + this.property);\n    }\n    this.union.discriminator.encode(this.variant, b, offset);\n    let span = contentOffset;\n    if (this.layout) {\n      this.layout.encode(src[this.property], b, offset + contentOffset);\n      span += this.layout.getSpan(b, offset + contentOffset);\n      if ((0 <= this.union.span)\n          && (span > this.union.span)) {\n        throw new Error('encoded variant overruns containing union');\n      }\n    }\n    return span;\n  }\n\n  /** Delegate {@link Layout#fromArray|fromArray} to {@link\n   * VariantLayout#layout|layout}. */\n  fromArray(values) {\n    if (this.layout) {\n      return this.layout.fromArray(values);\n    }\n  }\n}\n\n/** JavaScript chose to define bitwise operations as operating on\n * signed 32-bit values in 2's complement form, meaning any integer\n * with bit 31 set is going to look negative.  For right shifts that's\n * not a problem, because `>>>` is a logical shift, but for every\n * other bitwise operator we have to compensate for possible negative\n * results. */\nfunction fixBitwiseResult(v) {\n  if (0 > v) {\n    v += 0x100000000;\n  }\n  return v;\n}\n\n/**\n * Contain a sequence of bit fields as an unsigned integer.\n *\n * *Factory*: {@link module:Layout.bits|bits}\n *\n * This is a container element; within it there are {@link BitField}\n * instances that provide the extracted properties.  The container\n * simply defines the aggregate representation and its bit ordering.\n * The representation is an object containing properties with numeric\n * or {@link Boolean} values.\n *\n * {@link BitField}s are added with the {@link\n * BitStructure#addField|addField} and {@link\n * BitStructure#addBoolean|addBoolean} methods.\n\n * @param {Layout} word - initializer for {@link\n * BitStructure#word|word}.  The parameter must be an instance of\n * {@link UInt} (or {@link UIntBE}) that is no more than 4 bytes wide.\n *\n * @param {bool} [msb] - `true` if the bit numbering starts at the\n * most significant bit of the containing word; `false` (default) if\n * it starts at the least significant bit of the containing word.  If\n * the parameter at this position is a string and `property` is\n * `undefined` the value of this argument will instead be used as the\n * value of `property`.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass BitStructure extends Layout {\n  constructor(word, msb, property) {\n    if (!((word instanceof UInt)\n          || (word instanceof UIntBE))) {\n      throw new TypeError('word must be a UInt or UIntBE layout');\n    }\n    if (('string' === typeof msb)\n        && (undefined === property)) {\n      property = msb;\n      msb = undefined;\n    }\n    if (4 < word.span) {\n      throw new RangeError('word cannot exceed 32 bits');\n    }\n    super(word.span, property);\n\n    /** The layout used for the packed value.  {@link BitField}\n     * instances are packed sequentially depending on {@link\n     * BitStructure#msb|msb}. */\n    this.word = word;\n\n    /** Whether the bit sequences are packed starting at the most\n     * significant bit growing down (`true`), or the least significant\n     * bit growing up (`false`).\n     *\n     * **NOTE** Regardless of this value, the least significant bit of\n     * any {@link BitField} value is the least significant bit of the\n     * corresponding section of the packed value. */\n    this.msb = !!msb;\n\n    /** The sequence of {@link BitField} layouts that comprise the\n     * packed structure.\n     *\n     * **NOTE** The array remains mutable to allow fields to be {@link\n     * BitStructure#addField|added} after construction.  Users should\n     * not manipulate the content of this property.*/\n    this.fields = [];\n\n    /* Storage for the value.  Capture a variable instead of using an\n     * instance property because we don't want anything to change the\n     * value without going through the mutator. */\n    let value = 0;\n    this._packedSetValue = function(v) {\n      value = fixBitwiseResult(v);\n      return this;\n    };\n    this._packedGetValue = function() {\n      return value;\n    };\n  }\n\n  /** @override */\n  decode(b, offset) {\n    const dest = this.makeDestinationObject();\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const value = this.word.decode(b, offset);\n    this._packedSetValue(value);\n    for (const fd of this.fields) {\n      if (undefined !== fd.property) {\n        dest[fd.property] = fd.decode(value);\n      }\n    }\n    return dest;\n  }\n\n  /** Implement {@link Layout#encode|encode} for {@link BitStructure}.\n   *\n   * If `src` is missing a property for a member with a defined {@link\n   * Layout#property|property} the corresponding region of the packed\n   * value is left unmodified.  Unused bits are also left unmodified. */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    const value = this.word.decode(b, offset);\n    this._packedSetValue(value);\n    for (const fd of this.fields) {\n      if (undefined !== fd.property) {\n        const fv = src[fd.property];\n        if (undefined !== fv) {\n          fd.encode(fv);\n        }\n      }\n    }\n    return this.word.encode(this._packedGetValue(), b, offset);\n  }\n\n  /** Register a new bitfield with a containing bit structure.  The\n   * resulting bitfield is returned.\n   *\n   * @param {Number} bits - initializer for {@link BitField#bits|bits}.\n   *\n   * @param {string} property - initializer for {@link\n   * Layout#property|property}.\n   *\n   * @return {BitField} */\n  addField(bits, property) {\n    const bf = new BitField(this, bits, property);\n    this.fields.push(bf);\n    return bf;\n  }\n\n  /** As with {@link BitStructure#addField|addField} for single-bit\n   * fields with `boolean` value representation.\n   *\n   * @param {string} property - initializer for {@link\n   * Layout#property|property}.\n   *\n   * @return {Boolean} */\n  addBoolean(property) {\n    // This is my Boolean, not the Javascript one.\n    // eslint-disable-next-line no-new-wrappers\n    const bf = new Boolean(this, property);\n    this.fields.push(bf);\n    return bf;\n  }\n\n  /**\n   * Get access to the bit field for a given property.\n   *\n   * @param {String} property - the bit field of interest.\n   *\n   * @return {BitField} - the field associated with `property`, or\n   * undefined if there is no such property.\n   */\n  fieldFor(property) {\n    if ('string' !== typeof property) {\n      throw new TypeError('property must be string');\n    }\n    for (const fd of this.fields) {\n      if (fd.property === property) {\n        return fd;\n      }\n    }\n  }\n}\n\n/**\n * Represent a sequence of bits within a {@link BitStructure}.\n *\n * All bit field values are represented as unsigned integers.\n *\n * **NOTE** User code should not invoke this constructor directly.\n * Use the container {@link BitStructure#addField|addField} helper\n * method.\n *\n * **NOTE** BitField instances are not instances of {@link Layout}\n * since {@link Layout#span|span} measures 8-bit units.\n *\n * @param {BitStructure} container - initializer for {@link\n * BitField#container|container}.\n *\n * @param {Number} bits - initializer for {@link BitField#bits|bits}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n */\nclass BitField {\n  constructor(container, bits, property) {\n    if (!(container instanceof BitStructure)) {\n      throw new TypeError('container must be a BitStructure');\n    }\n    if ((!Number.isInteger(bits)) || (0 >= bits)) {\n      throw new TypeError('bits must be positive integer');\n    }\n    const totalBits = 8 * container.span;\n    const usedBits = container.fields.reduce((sum, fd) => sum + fd.bits, 0);\n    if ((bits + usedBits) > totalBits) {\n      throw new Error('bits too long for span remainder ('\n                      + (totalBits - usedBits) + ' of '\n                      + totalBits + ' remain)');\n    }\n\n    /** The {@link BitStructure} instance to which this bit field\n     * belongs. */\n    this.container = container;\n\n    /** The span of this value in bits. */\n    this.bits = bits;\n\n    /** A mask of {@link BitField#bits|bits} bits isolating value bits\n     * that fit within the field.\n     *\n     * That is, it masks a value that has not yet been shifted into\n     * position within its containing packed integer. */\n    this.valueMask = (1 << bits) - 1;\n    if (32 === bits) { // shifted value out of range\n      this.valueMask = 0xFFFFFFFF;\n    }\n\n    /** The offset of the value within the containing packed unsigned\n     * integer.  The least significant bit of the packed value is at\n     * offset zero, regardless of bit ordering used. */\n    this.start = usedBits;\n    if (this.container.msb) {\n      this.start = totalBits - usedBits - bits;\n    }\n\n    /** A mask of {@link BitField#bits|bits} isolating the field value\n     * within the containing packed unsigned integer. */\n    this.wordMask = fixBitwiseResult(this.valueMask << this.start);\n\n    /** The property name used when this bitfield is represented in an\n     * Object.\n     *\n     * Intended to be functionally equivalent to {@link\n     * Layout#property}.\n     *\n     * If left undefined the corresponding span of bits will be\n     * treated as padding: it will not be mutated by {@link\n     * Layout#encode|encode} nor represented as a property in the\n     * decoded Object. */\n    this.property = property;\n  }\n\n  /** Store a value into the corresponding subsequence of the containing\n   * bit field. */\n  decode() {\n    const word = this.container._packedGetValue();\n    const wordValue = fixBitwiseResult(word & this.wordMask);\n    const value = wordValue >>> this.start;\n    return value;\n  }\n\n  /** Store a value into the corresponding subsequence of the containing\n   * bit field.\n   *\n   * **NOTE** This is not a specialization of {@link\n   * Layout#encode|Layout.encode} and there is no return value. */\n  encode(value) {\n    if ((!Number.isInteger(value))\n        || (value !== fixBitwiseResult(value & this.valueMask))) {\n      throw new TypeError(nameWithProperty('BitField.encode', this)\n                          + ' value must be integer not exceeding ' + this.valueMask);\n    }\n    const word = this.container._packedGetValue();\n    const wordValue = fixBitwiseResult(value << this.start);\n    this.container._packedSetValue(fixBitwiseResult(word & ~this.wordMask)\n                                   | wordValue);\n  };\n}\n\n/**\n * Represent a single bit within a {@link BitStructure} as a\n * JavaScript boolean.\n *\n * **NOTE** User code should not invoke this constructor directly.\n * Use the container {@link BitStructure#addBoolean|addBoolean} helper\n * method.\n *\n * @param {BitStructure} container - initializer for {@link\n * BitField#container|container}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {BitField}\n */\n/* eslint-disable no-extend-native */\nclass Boolean extends BitField {\n  constructor(container, property) {\n    super(container, 1, property);\n  }\n\n  /** Override {@link BitField#decode|decode} for {@link Boolean|Boolean}.\n   *\n   * @returns {boolean} */\n  decode(b, offset) {\n    return !!BitField.prototype.decode.call(this, b, offset);\n  }\n\n  /** @override */\n  encode(value) {\n    if ('boolean' === typeof value) {\n      // BitField requires integer values\n      value = +value;\n    }\n    return BitField.prototype.encode.call(this, value);\n  }\n}\n/* eslint-enable no-extend-native */\n\n/**\n * Contain a fixed-length block of arbitrary data, represented as a\n * Buffer.\n *\n * *Factory*: {@link module:Layout.blob|blob}\n *\n * @param {(Number|ExternalLayout)} length - initializes {@link\n * Blob#length|length}.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Blob extends Layout {\n  constructor(length, property) {\n    if (!(((length instanceof ExternalLayout) && length.isCount())\n          || (Number.isInteger(length) && (0 <= length)))) {\n      throw new TypeError('length must be positive integer '\n                          + 'or an unsigned integer ExternalLayout');\n    }\n\n    let span = -1;\n    if (!(length instanceof ExternalLayout)) {\n      span = length;\n    }\n    super(span, property);\n\n    /** The number of bytes in the blob.\n     *\n     * This may be a non-negative integer, or an instance of {@link\n     * ExternalLayout} that satisfies {@link\n     * ExternalLayout#isCount|isCount()}. */\n    this.length = length;\n  }\n\n  /** @override */\n  getSpan(b, offset) {\n    let span = this.span;\n    if (0 > span) {\n      span = this.length.decode(b, offset);\n    }\n    return span;\n  }\n\n  /** @override */\n  decode(b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let span = this.span;\n    if (0 > span) {\n      span = this.length.decode(b, offset);\n    }\n    return b.slice(offset, offset + span);\n  }\n\n  /** Implement {@link Layout#encode|encode} for {@link Blob}.\n   *\n   * **NOTE** If {@link Layout#count|count} is an instance of {@link\n   * ExternalLayout} then the length of `src` will be encoded as the\n   * count after `src` is encoded. */\n  encode(src, b, offset) {\n    let span = this.length;\n    if (this.length instanceof ExternalLayout) {\n      span = src.length;\n    }\n    if (!(Buffer.isBuffer(src)\n          && (span === src.length))) {\n      throw new TypeError(nameWithProperty('Blob.encode', this)\n                          + ' requires (length ' + span + ') Buffer as src');\n    }\n    if ((offset + span) > b.length) {\n      throw new RangeError('encoding overruns Buffer');\n    }\n    b.write(src.toString('hex'), offset, span, 'hex');\n    if (this.length instanceof ExternalLayout) {\n      this.length.encode(span, b, offset);\n    }\n    return span;\n  }\n}\n\n/**\n * Contain a `NUL`-terminated UTF8 string.\n *\n * *Factory*: {@link module:Layout.cstr|cstr}\n *\n * **NOTE** Any UTF8 string that incorporates a zero-valued byte will\n * not be correctly decoded by this layout.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass CString extends Layout {\n  constructor(property) {\n    super(-1, property);\n  }\n\n  /** @override */\n  getSpan(b, offset) {\n    if (!Buffer.isBuffer(b)) {\n      throw new TypeError('b must be a Buffer');\n    }\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let idx = offset;\n    while ((idx < b.length) && (0 !== b[idx])) {\n      idx += 1;\n    }\n    return 1 + idx - offset;\n  }\n\n  /** @override */\n  decode(b, offset, dest) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let span = this.getSpan(b, offset);\n    return b.slice(offset, offset + span - 1).toString('utf-8');\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    /* Must force this to a string, lest it be a number and the\n     * \"utf8-encoding\" below actually allocate a buffer of length\n     * src */\n    if ('string' !== typeof src) {\n      src = src.toString();\n    }\n    const srcb = new Buffer(src, 'utf8');\n    const span = srcb.length;\n    if ((offset + span) > b.length) {\n      throw new RangeError('encoding overruns Buffer');\n    }\n    srcb.copy(b, offset);\n    b[offset + span] = 0;\n    return span + 1;\n  }\n}\n\n/**\n * Contain a UTF8 string with implicit length.\n *\n * *Factory*: {@link module:Layout.utf8|utf8}\n *\n * **NOTE** Because the length is implicit in the size of the buffer\n * this layout should be used only in isolation, or in a situation\n * where the length can be expressed by operating on a slice of the\n * containing buffer.\n *\n * @param {Number} [maxSpan] - the maximum length allowed for encoded\n * string content.  If not provided there is no bound on the allowed\n * content.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UTF8 extends Layout {\n  constructor(maxSpan, property) {\n    if (('string' === typeof maxSpan)\n        && (undefined === property)) {\n      property = maxSpan;\n      maxSpan = undefined;\n    }\n    if (undefined === maxSpan) {\n      maxSpan = -1;\n    } else if (!Number.isInteger(maxSpan)) {\n      throw new TypeError('maxSpan must be an integer');\n    }\n\n    super(-1, property);\n\n    /** The maximum span of the layout in bytes.\n     *\n     * Positive values are generally expected.  Zero is abnormal.\n     * Attempts to encode or decode a value that exceeds this length\n     * will throw a `RangeError`.\n     *\n     * A negative value indicates that there is no bound on the length\n     * of the content. */\n    this.maxSpan = maxSpan;\n  }\n\n  /** @override */\n  getSpan(b, offset) {\n    if (!Buffer.isBuffer(b)) {\n      throw new TypeError('b must be a Buffer');\n    }\n    if (undefined === offset) {\n      offset = 0;\n    }\n    return b.length - offset;\n  }\n\n  /** @override */\n  decode(b, offset, dest) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    let span = this.getSpan(b, offset);\n    if ((0 <= this.maxSpan)\n        && (this.maxSpan < span)) {\n      throw new RangeError('text length exceeds maxSpan');\n    }\n    return b.slice(offset, offset + span).toString('utf-8');\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    if (undefined === offset) {\n      offset = 0;\n    }\n    /* Must force this to a string, lest it be a number and the\n     * \"utf8-encoding\" below actually allocate a buffer of length\n     * src */\n    if ('string' !== typeof src) {\n      src = src.toString();\n    }\n    const srcb = new Buffer(src, 'utf8');\n    const span = srcb.length;\n    if ((0 <= this.maxSpan)\n        && (this.maxSpan < span)) {\n      throw new RangeError('text length exceeds maxSpan');\n    }\n    if ((offset + span) > b.length) {\n      throw new RangeError('encoding overruns Buffer');\n    }\n    srcb.copy(b, offset);\n    return span;\n  }\n}\n\n/**\n * Contain a constant value.\n *\n * This layout may be used in cases where a JavaScript value can be\n * inferred without an expression in the binary encoding.  An example\n * would be a {@link VariantLayout|variant layout} where the content\n * is implied by the union {@link Union#discriminator|discriminator}.\n *\n * @param {Object|Number|String} value - initializer for {@link\n * Constant#value|value}.  If the value is an object (or array) and\n * the application intends the object to remain unchanged regardless\n * of what is done to values decoded by this layout, the value should\n * be frozen prior passing it to this constructor.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Constant extends Layout {\n  constructor(value, property) {\n    super(0, property);\n\n    /** The value produced by this constant when the layout is {@link\n     * Constant#decode|decoded}.\n     *\n     * Any JavaScript value including `null` and `undefined` is\n     * permitted.\n     *\n     * **WARNING** If `value` passed in the constructor was not\n     * frozen, it is possible for users of decoded values to change\n     * the content of the value. */\n    this.value = value;\n  }\n\n  /** @override */\n  decode(b, offset, dest) {\n    return this.value;\n  }\n\n  /** @override */\n  encode(src, b, offset) {\n    /* Constants take no space */\n    return 0;\n  }\n}\n\nexports.ExternalLayout = ExternalLayout;\nexports.GreedyCount = GreedyCount;\nexports.OffsetLayout = OffsetLayout;\nexports.UInt = UInt;\nexports.UIntBE = UIntBE;\nexports.Int = Int;\nexports.IntBE = IntBE;\nexports.Float = Float;\nexports.FloatBE = FloatBE;\nexports.Double = Double;\nexports.DoubleBE = DoubleBE;\nexports.Sequence = Sequence;\nexports.Structure = Structure;\nexports.UnionDiscriminator = UnionDiscriminator;\nexports.UnionLayoutDiscriminator = UnionLayoutDiscriminator;\nexports.Union = Union;\nexports.VariantLayout = VariantLayout;\nexports.BitStructure = BitStructure;\nexports.BitField = BitField;\nexports.Boolean = Boolean;\nexports.Blob = Blob;\nexports.CString = CString;\nexports.UTF8 = UTF8;\nexports.Constant = Constant;\n\n/** Factory for {@link GreedyCount}. */\nexports.greedy = ((elementSpan, property) => new GreedyCount(elementSpan, property));\n\n/** Factory for {@link OffsetLayout}. */\nexports.offset = ((layout, offset, property) => new OffsetLayout(layout, offset, property));\n\n/** Factory for {@link UInt|unsigned int layouts} spanning one\n * byte. */\nexports.u8 = (property => new UInt(1, property));\n\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning two bytes. */\nexports.u16 = (property => new UInt(2, property));\n\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning three bytes. */\nexports.u24 = (property => new UInt(3, property));\n\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning four bytes. */\nexports.u32 = (property => new UInt(4, property));\n\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning five bytes. */\nexports.u40 = (property => new UInt(5, property));\n\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning six bytes. */\nexports.u48 = (property => new UInt(6, property));\n\n/** Factory for {@link NearUInt64|little-endian unsigned int\n * layouts} interpreted as Numbers. */\nexports.nu64 = (property => new NearUInt64(property));\n\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning two bytes. */\nexports.u16be = (property => new UIntBE(2, property));\n\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning three bytes. */\nexports.u24be = (property => new UIntBE(3, property));\n\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning four bytes. */\nexports.u32be = (property => new UIntBE(4, property));\n\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning five bytes. */\nexports.u40be = (property => new UIntBE(5, property));\n\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning six bytes. */\nexports.u48be = (property => new UIntBE(6, property));\n\n/** Factory for {@link NearUInt64BE|big-endian unsigned int\n * layouts} interpreted as Numbers. */\nexports.nu64be = (property => new NearUInt64BE(property));\n\n/** Factory for {@link Int|signed int layouts} spanning one\n * byte. */\nexports.s8 = (property => new Int(1, property));\n\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning two bytes. */\nexports.s16 = (property => new Int(2, property));\n\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning three bytes. */\nexports.s24 = (property => new Int(3, property));\n\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning four bytes. */\nexports.s32 = (property => new Int(4, property));\n\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning five bytes. */\nexports.s40 = (property => new Int(5, property));\n\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning six bytes. */\nexports.s48 = (property => new Int(6, property));\n\n/** Factory for {@link NearInt64|little-endian signed int layouts}\n * interpreted as Numbers. */\nexports.ns64 = (property => new NearInt64(property));\n\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning two bytes. */\nexports.s16be = (property => new IntBE(2, property));\n\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning three bytes. */\nexports.s24be = (property => new IntBE(3, property));\n\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning four bytes. */\nexports.s32be = (property => new IntBE(4, property));\n\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning five bytes. */\nexports.s40be = (property => new IntBE(5, property));\n\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning six bytes. */\nexports.s48be = (property => new IntBE(6, property));\n\n/** Factory for {@link NearInt64BE|big-endian signed int layouts}\n * interpreted as Numbers. */\nexports.ns64be = (property => new NearInt64BE(property));\n\n/** Factory for {@link Float|little-endian 32-bit floating point} values. */\nexports.f32 = (property => new Float(property));\n\n/** Factory for {@link FloatBE|big-endian 32-bit floating point} values. */\nexports.f32be = (property => new FloatBE(property));\n\n/** Factory for {@link Double|little-endian 64-bit floating point} values. */\nexports.f64 = (property => new Double(property));\n\n/** Factory for {@link DoubleBE|big-endian 64-bit floating point} values. */\nexports.f64be = (property => new DoubleBE(property));\n\n/** Factory for {@link Structure} values. */\nexports.struct = ((fields, property, decodePrefixes) => new Structure(fields, property, decodePrefixes));\n\n/** Factory for {@link BitStructure} values. */\nexports.bits = ((word, msb, property) => new BitStructure(word, msb, property));\n\n/** Factory for {@link Sequence} values. */\nexports.seq = ((elementLayout, count, property) => new Sequence(elementLayout, count, property));\n\n/** Factory for {@link Union} values. */\nexports.union = ((discr, defaultLayout, property) => new Union(discr, defaultLayout, property));\n\n/** Factory for {@link UnionLayoutDiscriminator} values. */\nexports.unionLayoutDiscriminator = ((layout, property) => new UnionLayoutDiscriminator(layout, property));\n\n/** Factory for {@link Blob} values. */\nexports.blob = ((length, property) => new Blob(length, property));\n\n/** Factory for {@link CString} values. */\nexports.cstr = (property => new CString(property));\n\n/** Factory for {@link UTF8} values. */\nexports.utf8 = ((maxSpan, property) => new UTF8(maxSpan, property));\n\n/** Factory for {@link Constant} values. */\nexports.const = ((value, property) => new Constant(value, property));\n",null,"import { Keypair, PublicKey, Transaction } from '@solana/web3.js';\nimport type { BN } from '@coral-xyz/anchor';\n\n/**\n * AMM Pair account structure\n */\nexport interface AMMPairAccount {\n  version: number;\n  isInitialized: boolean;\n  bumpSeed: number;\n  tokenProgramId: PublicKey;\n  tokenA: PublicKey;\n  tokenB: PublicKey;\n  poolMint: PublicKey;\n  tokenAMint: PublicKey;\n  tokenBMint: PublicKey;\n  poolFeeAccount: PublicKey;\n  fees: Fees;\n  swapCurve: SwapCurve;\n}\n\n/**\n * Fee structure for AMM pair\n */\nexport interface Fees {\n  tradeFeeNumerator: BN;\n  tradeFeeDenominator: BN;\n  ownerTradeFeeNumerator: BN;\n  ownerTradeFeeDenominator: BN;\n  ownerWithdrawFeeNumerator: BN;\n  ownerWithdrawFeeDenominator: BN;\n  hostFeeNumerator: BN;\n  hostFeeDenominator: BN;\n}\n\n/**\n * Swap curve types\n */\nexport enum SwapCurveType {\n  ConstantProduct = 'ConstantProduct',\n  ConstantPrice = 'ConstantPrice',\n  Stable = 'Stable',\n  Offset = 'Offset',\n}\n\nexport type SwapCurve = { constantProduct: {} } | { constantPrice: {} } | { stable: {} } | { offset: {} };\n\n/**\n * Pair metadata (includes current state + derived data)\n */\nexport interface PairMetadata {\n  pair: PublicKey;\n  tokenX: TokenInfo;\n  tokenY: TokenInfo;\n  lpToken: TokenInfo;\n  feeAccount: PublicKey;\n  curve: SwapCurveType;\n  fees: FeeMetadata;\n}\n\nexport interface TokenInfo {\n  mint: PublicKey;\n  decimals: number;\n  reserve?: bigint;\n}\n\nexport interface FeeMetadata {\n  tradeFee: number; // percentage\n  ownerTradeFee: number;\n  ownerWithdrawFee: number;\n  hostFee: number;\n}\n\n/**\n * Parameters for creating a new AMM pair\n */\nexport interface CreatePairParams {\n  /** Payer and initial liquidity provider */\n  payer: PublicKey;\n  /** Fee recipient address (defaults to Saros fee owner) */\n  feeOwner?: PublicKey;\n  /** Token A mint address */\n  tokenAMint: PublicKey;\n  /** Token B mint address */\n  tokenBMint: PublicKey;\n  /** Initial amount of token A to deposit */\n  initialTokenAAmount: bigint;\n  /** Initial amount of token B to deposit */\n  initialTokenBAmount: bigint;\n  /** Swap curve type (ConstantProduct, Stable, etc.) */\n  curveType: SwapCurveType;\n}\n\n/**\n * Result from pair creation\n */\nexport interface CreatePairResult {\n  /** Transaction to create the pair */\n  transaction: Transaction;\n  /** Pair account keypair (signer required) */\n  pairKeypair: Keypair;\n  /** LP token mint keypair (signer required) */\n  lpMintKeypair: Keypair;\n  /** Pool token A ATA address (derived from pool authority) */\n  poolTokenA: PublicKey;\n  /** Pool token B ATA address (derived from pool authority) */\n  poolTokenB: PublicKey;\n  /** Fee account ATA address (LP mint ATA owned by feeOwner) */\n  feeAccount: PublicKey;\n  /** Pair address */\n  pairAddress: PublicKey;\n  /** LP token mint address */\n  lpTokenMint: PublicKey;\n  /** Pair authority PDA */\n  pairAuthority: PublicKey;\n  /** Signers required for the transaction */\n  signers: Keypair[];\n}\n\n/**\n * Parameters for adding liquidity to a pool\n */\nexport interface AddLiquidityParams {\n  /** Payer and liquidity provider */\n  payer: PublicKey;\n  /** Desired amount of LP tokens to receive */\n  poolTokenAmount: bigint;\n  /** Maximum amount of token A willing to deposit (slippage protection) */\n  maximumTokenA: bigint;\n  /** Maximum amount of token B willing to deposit (slippage protection) */\n  maximumTokenB: bigint;\n  /** Optional: User's token A account (defaults to ATA) */\n  userTokenX?: PublicKey;\n  /** Optional: User's token B account (defaults to ATA) */\n  userTokenY?: PublicKey;\n  /** Optional: User's LP token account (defaults to ATA) */\n  userLpToken?: PublicKey;\n  /** Optional: existing transaction to append to */\n  transaction?: Transaction;\n}\n\n/**\n * Parameters for removing liquidity from a pool\n */\nexport interface RemoveLiquidityParams {\n  /** Payer and liquidity provider */\n  payer: PublicKey;\n  /** Amount of LP tokens to burn */\n  poolTokenAmount: bigint;\n  /** Minimum amount of token A to receive (slippage protection) */\n  minimumTokenA: bigint;\n  /** Minimum amount of token B to receive (slippage protection) */\n  minimumTokenB: bigint;\n  /** Optional: User's token A account (defaults to ATA) */\n  userTokenX?: PublicKey;\n  /** Optional: User's token B account (defaults to ATA) */\n  userTokenY?: PublicKey;\n  /** Optional: User's LP token account (defaults to ATA) */\n  userLpToken?: PublicKey;\n  /** Optional: existing transaction to append to */\n  transaction?: Transaction;\n}\n","import BN from 'bn.js';\nimport { PublicKey } from '@solana/web3.js';\nimport { SwapCurveType } from '../types/pair';\n\n/**\n * Supported network modes (devnet, mainnet)\n */\nexport enum MODE {\n  DEVNET = 'devnet',\n  MAINNET = 'mainnet',\n}\n\n/**\n * Saros fee owner (legacy token-swap pools).\n */\nexport const SAROS_FEE_OWNER = new PublicKey('FDbLZ5DRo61queVRH9LL1mQnsiAoubQEnoCRuPEmH9M8');\n\n/**\n * AMM Program IDs across networks\n * Note: Devnet version does not include latest pool metadata features.\n */\nexport const AMM_PROGRAM_IDS: Record<MODE, PublicKey> = {\n  [MODE.MAINNET]: new PublicKey('SSwapUtytfBdBn1b9NUGG6foMVPtcWgpRU32HToDUZr'),\n  [MODE.DEVNET]: new PublicKey('SSStkgZHW17LRbGUFSDQqzZ4jMXpfmVxHDbWwMaFEXE'),\n};\n\n/**\n * Farm Program IDs across networks\n * LP token farming and single token staking\n */\nexport const FARM_PROGRAM_IDS: Record<MODE, PublicKey> = {\n  [MODE.MAINNET]: new PublicKey('FARMr8rFJohG2CXFWKKmj8Z3XAhZNdYZ5CE3TKeWpump'),\n  [MODE.DEVNET]: new PublicKey('SFFxHvYKTBgC7XYEZDua6m28NZo9fNnDRCEtM7AHR4m'),\n};\n\n/**\n * Legacy Saros swap account size.\n */\nexport const SWAP_ACCOUNT_SIZE = 324;\n\n/**\n * Default fees for AMM pairs.\n */\nexport const DEFAULT_FEES = {\n  tradeFeeNumerator: new BN(0),\n  tradeFeeDenominator: new BN(10000),\n\n  ownerTradeFeeNumerator: new BN(30),\n  ownerTradeFeeDenominator: new BN(10000),\n\n  ownerWithdrawFeeNumerator: new BN(0),\n  ownerWithdrawFeeDenominator: new BN(0),\n\n  hostFeeNumerator: new BN(20),\n  hostFeeDenominator: new BN(100),\n};\n\n/**\n * Anchor-compatible curve type encoding\n * Used by AMM initialize instruction\n */\nexport const CURVE_TYPE_MAP: Record<SwapCurveType, any> = {\n  [SwapCurveType.ConstantProduct]: { constantProduct: {} },\n  [SwapCurveType.ConstantPrice]: { constantPrice: {} },\n  [SwapCurveType.Stable]: { stable: {} },\n  [SwapCurveType.Offset]: { offset: {} },\n};\n\n/**\n * Default swap calculator (32 bytes of zero).\n */\nexport const DEFAULT_SWAP_CALCULATOR = Array.from(new Uint8Array(32));\n","{\n  \"address\": \"SSwapUtytfBdBn1b9NUGG6foMVPtcWgpRU32HToDUZr\",\n  \"metadata\": {\n    \"name\": \"saros-swap\",\n    \"version\": \"2.2.0\",\n    \"spec\": \"2.2.0\",\n    \"description\": \"Saros AMM\"\n  },\n  \"instructions\": [\n    {\n      \"name\": \"initialize\",\n      \"discriminator\": [0],\n      \"accounts\": [\n        {\n          \"name\": \"swap_info\",\n          \"writable\": true,\n          \"signer\": true\n        },\n        {\n          \"name\": \"authority_info\"\n        },\n        {\n          \"name\": \"token_a_info\"\n        },\n        {\n          \"name\": \"token_b_info\"\n        },\n        {\n          \"name\": \"pool_mint_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"fee_account_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"destination_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_program_info\"\n        }\n      ],\n      \"args\": [\n        {\n          \"name\": \"fees\",\n          \"type\": {\n            \"defined\": {\n              \"name\": \"Fees\"\n            }\n          }\n        },\n        {\n          \"name\": \"swap_curve\",\n          \"type\": {\n            \"defined\": {\n              \"name\": \"SwapCurve\"\n            }\n          }\n        },\n        {\n          \"name\": \"swap_calculator\",\n          \"type\": {\n            \"array\": [\"u8\", 32]\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"swap\",\n      \"discriminator\": [1],\n      \"accounts\": [\n        {\n          \"name\": \"swap_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"authority_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"user_transfer_authority_info\",\n          \"writable\": true,\n          \"signer\": true\n        },\n        {\n          \"name\": \"source_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"swap_source_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"swap_destination_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"destination_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"pool_mint_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"pool_fee_account_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_program_info\"\n        }\n      ],\n      \"args\": [\n        {\n          \"name\": \"amount_in\",\n          \"type\": \"u64\"\n        },\n        {\n          \"name\": \"minimum_amount_out\",\n          \"type\": \"u64\"\n        }\n      ]\n    },\n    {\n      \"name\": \"deposit_all_token_types\",\n      \"discriminator\": [2],\n      \"accounts\": [\n        {\n          \"name\": \"swap_info\"\n        },\n        {\n          \"name\": \"authority_info\"\n        },\n        {\n          \"name\": \"user_transfer_authority_info\",\n          \"writable\": true,\n          \"signer\": true\n        },\n        {\n          \"name\": \"source_a_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"source_b_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_a_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_b_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"pool_mint_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"dest_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_program_info\"\n        }\n      ],\n      \"args\": [\n        {\n          \"name\": \"pool_token_amount\",\n          \"type\": \"u64\"\n        },\n        {\n          \"name\": \"maximum_token_a_amount\",\n          \"type\": \"u64\"\n        },\n        {\n          \"name\": \"maximum_token_b_amount\",\n          \"type\": \"u64\"\n        }\n      ]\n    },\n    {\n      \"name\": \"withdraw_all_token_types\",\n      \"discriminator\": [3],\n      \"accounts\": [\n        {\n          \"name\": \"swap_info\"\n        },\n        {\n          \"name\": \"authority_info\"\n        },\n        {\n          \"name\": \"user_transfer_authority_info\",\n          \"writable\": true,\n          \"signer\": true\n        },\n        {\n          \"name\": \"pool_mint_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"source_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_a_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_b_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"dest_token_a_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"dest_token_b_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"pool_fee_account_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_program_info\"\n        }\n      ],\n      \"args\": [\n        {\n          \"name\": \"pool_token_amount\",\n          \"type\": \"u64\"\n        },\n        {\n          \"name\": \"minimum_token_a_amount\",\n          \"type\": \"u64\"\n        },\n        {\n          \"name\": \"minimum_token_b_amount\",\n          \"type\": \"u64\"\n        }\n      ]\n    },\n    {\n      \"name\": \"swap_exact_out\",\n      \"discriminator\": [6],\n      \"accounts\": [\n        {\n          \"name\": \"swap_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"authority_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"user_transfer_authority_info\",\n          \"writable\": true,\n          \"signer\": true\n        },\n        {\n          \"name\": \"source_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"swap_source_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"swap_destination_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"destination_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"pool_mint_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"pool_fee_account_info\",\n          \"writable\": true\n        },\n        {\n          \"name\": \"token_program_info\"\n        }\n      ],\n      \"args\": [\n        {\n          \"name\": \"amount_out\",\n          \"type\": \"u64\"\n        },\n        {\n          \"name\": \"maximum_amount_in\",\n          \"type\": \"u64\"\n        }\n      ]\n    }\n  ],\n  \"accounts\": [\n    {\n      \"name\": \"Pair\",\n      \"discriminator\": []\n    }\n  ],\n  \"types\": [\n    {\n      \"name\": \"Pair\",\n      \"type\": {\n        \"kind\": \"struct\",\n        \"fields\": [\n          {\n            \"name\": \"version\",\n            \"type\": \"u8\"\n          },\n          {\n            \"name\": \"is_initialized\",\n            \"type\": \"bool\"\n          },\n          {\n            \"name\": \"bump_seed\",\n            \"type\": \"u8\"\n          },\n          {\n            \"name\": \"token_program_id\",\n            \"type\": \"pubkey\"\n          },\n          {\n            \"name\": \"token_a\",\n            \"type\": \"pubkey\"\n          },\n          {\n            \"name\": \"token_b\",\n            \"type\": \"pubkey\"\n          },\n          {\n            \"name\": \"pool_mint\",\n            \"type\": \"pubkey\"\n          },\n          {\n            \"name\": \"token_a_mint\",\n            \"type\": \"pubkey\"\n          },\n          {\n            \"name\": \"token_b_mint\",\n            \"type\": \"pubkey\"\n          },\n          {\n            \"name\": \"pool_fee_account\",\n            \"type\": \"pubkey\"\n          },\n          {\n            \"name\": \"fees\",\n            \"type\": {\n              \"defined\": {\n                \"name\": \"Fees\"\n              }\n            }\n          },\n          {\n            \"name\": \"swap_curve\",\n            \"type\": {\n              \"defined\": {\n                \"name\": \"SwapCurve\"\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"Fees\",\n      \"type\": {\n        \"kind\": \"struct\",\n        \"fields\": [\n          {\n            \"name\": \"trade_fee_numerator\",\n            \"type\": \"u64\"\n          },\n          {\n            \"name\": \"trade_fee_denominator\",\n            \"type\": \"u64\"\n          },\n          {\n            \"name\": \"owner_trade_fee_numerator\",\n            \"type\": \"u64\"\n          },\n          {\n            \"name\": \"owner_trade_fee_denominator\",\n            \"type\": \"u64\"\n          },\n          {\n            \"name\": \"owner_withdraw_fee_numerator\",\n            \"type\": \"u64\"\n          },\n          {\n            \"name\": \"owner_withdraw_fee_denominator\",\n            \"type\": \"u64\"\n          },\n          {\n            \"name\": \"host_fee_numerator\",\n            \"type\": \"u64\"\n          },\n          {\n            \"name\": \"host_fee_denominator\",\n            \"type\": \"u64\"\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"SwapCurve\",\n      \"type\": {\n        \"kind\": \"enum\",\n        \"variants\": [\n          {\n            \"name\": \"ConstantProduct\"\n          },\n          {\n            \"name\": \"ConstantPrice\"\n          },\n          {\n            \"name\": \"Stable\"\n          },\n          {\n            \"name\": \"Offset\"\n          }\n        ]\n      }\n    }\n  ]\n}\n","import { Connection, PublicKey } from '@solana/web3.js';\nimport { AnchorProvider, Program, Wallet } from '@coral-xyz/anchor';\nimport { AMM_PROGRAM_IDS, MODE } from '../../constants/config';\nimport SarosSwapIDL from '../../constants/idl/amm.json';\nimport type { SarosSwap } from '../../constants/idl/amm';\n\nexport interface SarosAMMConfig {\n  mode: MODE;\n  connection: Connection;\n}\n\nexport abstract class SarosBaseService {\n  protected config: SarosAMMConfig;\n  connection: Connection;\n  ammProgram!: Program<SarosSwap>;\n\n  constructor(config: SarosAMMConfig) {\n    this.config = config;\n    this.connection = config.connection;\n\n    const provider = new AnchorProvider(this.connection, {} as Wallet, AnchorProvider.defaultOptions());\n\n    // Get program ID for the specified network\n    const programId = AMM_PROGRAM_IDS[config.mode];\n\n    // Create program instance using mainnet IDL and network-specific program ID\n    this.ammProgram = new Program({ ...SarosSwapIDL, address: programId.toBase58() } as SarosSwap, provider);\n  }\n\n  public getDexName(): string {\n    return 'Saros AMM';\n  }\n\n  public getDexProgramId(): PublicKey {\n    return this.ammProgram.programId;\n  }\n}\n","/**\n * Calculate output amount for a constant product AMM swap\n * Formula: amountOut = (reserveOut * amountIn * feeMultiplier) / (reserveIn + amountIn * feeMultiplier)\n */\nexport function calculateSwapOutput(\n  amountIn: bigint,\n  reserveIn: bigint,\n  reserveOut: bigint,\n  tradeFeeNumerator: bigint,\n  tradeFeeDenominator: bigint\n): bigint {\n  if (reserveIn === 0n || reserveOut === 0n) {\n    return 0n;\n  }\n\n  const feeMultiplier = tradeFeeDenominator - tradeFeeNumerator;\n  const amountInWithFee = amountIn * feeMultiplier;\n  const numerator = amountInWithFee * reserveOut;\n  const denominator = reserveIn * tradeFeeDenominator + amountInWithFee;\n\n  return numerator / denominator;\n}\n\n/**\n * Calculate price impact percentage\n */\nexport function calculatePriceImpact(\n  amountIn: bigint,\n  amountOut: bigint,\n  reserveIn: bigint,\n  reserveOut: bigint\n): number {\n  if (reserveIn === 0n || reserveOut === 0n) {\n    return 0;\n  }\n\n  const priceBefore = Number(reserveOut) / Number(reserveIn);\n  const newReserveIn = reserveIn + amountIn;\n  const newReserveOut = reserveOut - amountOut;\n  const priceAfter = Number(newReserveOut) / Number(newReserveIn);\n\n  return Math.abs(((priceAfter - priceBefore) / priceBefore) * 100);\n}\n\n/**\n * Apply slippage to get minimum output\n */\nexport function getMinOutputWithSlippage(amount: bigint, slippagePercent: number): bigint {\n  const slippageBps = BigInt(Math.floor(slippagePercent * 100));\n  return (amount * (10000n - slippageBps)) / 10000n;\n}\n","import { PublicKey } from '@solana/web3.js';\n\n/**\n * AMM Pool PDA derivations\n */\n\nexport function derivePoolAuthority(poolPubkey: PublicKey, programId: PublicKey): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync([poolPubkey.toBuffer()], programId);\n}\n\n/**\n * Farm / Stake PDA derivations\n */\n\nexport function deriveFarmUserPoolAddress(\n  user: PublicKey,\n  poolAddress: PublicKey,\n  programId: PublicKey\n): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync([user.toBuffer(), poolAddress.toBuffer()], programId);\n}\n\nexport function deriveFarmUserPoolRewardAddress(\n  user: PublicKey,\n  poolReward: PublicKey,\n  programId: PublicKey\n): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync([user.toBuffer(), poolReward.toBuffer()], programId);\n}\n\nexport function deriveFarmPoolAuthority(poolAddress: PublicKey, programId: PublicKey): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync([Buffer.from('authority'), poolAddress.toBuffer()], programId);\n}\n\nexport function deriveFarmPoolRewardAuthority(poolReward: PublicKey, programId: PublicKey): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync([Buffer.from('authority'), poolReward.toBuffer()], programId);\n}\n","export enum SarosAMMErrorCode {\n  InvalidTokenAmount = 'INVALID_TOKEN_AMOUNT',\n  InvalidDecimals = 'INVALID_DECIMALS',\n  PairNotInitialized = 'PAIR_NOT_INITIALIZED',\n  PairFetchFailed = 'PAIR_FETCH_FAILED',\n  PairCreationFailed = 'PAIR_CREATION_FAILED',\n  SwapFailed = 'SWAP_FAILED',\n  AddLiquidityFailed = 'ADD_LIQUIDITY_FAILED',\n  RemoveLiquidityFailed = 'REMOVE_LIQUIDITY_FAILED',\n  QuoteCalculationFailed = 'QUOTE_CALCULATION_FAILED',\n  ZeroAmount = 'ZERO_AMOUNT',\n  InvalidSlippage = 'INVALID_SLIPPAGE',\n  InsufficientLiquidity = 'INSUFFICIENT_LIQUIDITY',\n  InvalidTokenAccount = 'INVALID_TOKEN_ACCOUNT',\n  PoolNotInitialized = 'POOL_NOT_INITIALIZED',\n  PoolFetchFailed = 'POOL_FETCH_FAILED',\n}\n\nexport class SarosAMMError extends Error {\n  constructor(\n    message: string,\n    public code: SarosAMMErrorCode\n  ) {\n    super(message);\n    this.name = 'SarosAMMError';\n  }\n\n  static InvalidTokenAmount(value?: string): SarosAMMError {\n    const msg = value ? `Invalid token amount: ${value}` : 'Invalid token amount';\n    return new SarosAMMError(msg, SarosAMMErrorCode.InvalidTokenAmount);\n  }\n\n  static InvalidDecimals(decimals?: number): SarosAMMError {\n    const msg = decimals !== undefined ? `Invalid decimals: ${decimals}` : 'Invalid decimals';\n    return new SarosAMMError(msg, SarosAMMErrorCode.InvalidDecimals);\n  }\n\n  static PairNotInitialized(): SarosAMMError {\n    return new SarosAMMError('Pair is not initialized', SarosAMMErrorCode.PairNotInitialized);\n  }\n\n  static PairFetchFailed(): SarosAMMError {\n    return new SarosAMMError('Failed to fetch pair account', SarosAMMErrorCode.PairFetchFailed);\n  }\n\n  static PairCreationFailed(): SarosAMMError {\n    return new SarosAMMError('Failed to create pair', SarosAMMErrorCode.PairCreationFailed);\n  }\n\n  static SwapFailed(): SarosAMMError {\n    return new SarosAMMError('Failed to build swap transaction', SarosAMMErrorCode.SwapFailed);\n  }\n\n  static AddLiquidityFailed(): SarosAMMError {\n    return new SarosAMMError('Failed to build add liquidity transaction', SarosAMMErrorCode.AddLiquidityFailed);\n  }\n\n  static RemoveLiquidityFailed(): SarosAMMError {\n    return new SarosAMMError('Failed to build remove liquidity transaction', SarosAMMErrorCode.RemoveLiquidityFailed);\n  }\n\n  static QuoteCalculationFailed(): SarosAMMError {\n    return new SarosAMMError('Failed to calculate quote', SarosAMMErrorCode.QuoteCalculationFailed);\n  }\n\n  static ZeroAmount(): SarosAMMError {\n    return new SarosAMMError('Amount must be greater than zero', SarosAMMErrorCode.ZeroAmount);\n  }\n\n  static InvalidSlippage(): SarosAMMError {\n    return new SarosAMMError('Slippage must be between 0 and 100', SarosAMMErrorCode.InvalidSlippage);\n  }\n\n  static InsufficientLiquidity(): SarosAMMError {\n    return new SarosAMMError('Insufficient liquidity in pool', SarosAMMErrorCode.InsufficientLiquidity);\n  }\n\n  static PoolNotInitialized(): SarosAMMError {\n    return new SarosAMMError('Pool state not loaded. Call refreshState() first', SarosAMMErrorCode.PoolNotInitialized);\n  }\n\n  static PoolFetchFailed(poolType: string = 'pool'): SarosAMMError {\n    return new SarosAMMError(`Failed to refresh ${poolType} state`, SarosAMMErrorCode.PoolFetchFailed);\n  }\n\n  static handleError(error: any, fallback: SarosAMMError): never {\n    if (error instanceof SarosAMMError) {\n      throw error;\n    }\n    throw fallback;\n  }\n}\n","import * as borsh from '@coral-xyz/borsh';\nimport { BN } from '@coral-xyz/anchor';\nimport { PublicKey } from '@solana/web3.js';\nimport { AMMPairAccount } from '../types';\n\n/**\n * Manual Borsh decoder for legacy Anchor programs without discriminators.\n *  The Saros AMM program does NOT use Anchor discriminators - MUST use manual decoder\n * Anchor's `.fetch()` method will fail because it expects the discriminator.\n */\n\ninterface DecodedTokenSwap {\n  version: number;\n  isInitialized: number;\n  bumpSeed: number;\n  tokenProgramId: any; // Will be converted to PublicKey\n  tokenAccountA: any;\n  tokenAccountB: any;\n  tokenPool: any;\n  mintA: any;\n  mintB: any;\n  feeAccount: any;\n  tradeFeeNumerator: bigint;\n  tradeFeeDenominator: bigint;\n  ownerTradeFeeNumerator: bigint;\n  ownerTradeFeeDenominator: bigint;\n  ownerWithdrawFeeNumerator: bigint;\n  ownerWithdrawFeeDenominator: bigint;\n  hostFeeNumerator: bigint;\n  hostFeeDenominator: bigint;\n  curveType: number;\n  curveParameters: number[];\n}\n\n// Define Pair account structure matching the on-chain data layout\nconst tokenSwapLayout = borsh.struct<DecodedTokenSwap>([\n  borsh.u8('version'),\n  borsh.u8('isInitialized'),\n  borsh.u8('bumpSeed'),\n  borsh.publicKey('tokenProgramId'),\n  borsh.publicKey('tokenAccountA'), // tokenA\n  borsh.publicKey('tokenAccountB'), // tokenB\n  borsh.publicKey('tokenPool'), // poolMint\n  borsh.publicKey('mintA'), // tokenAMint\n  borsh.publicKey('mintB'), // tokenBMint\n  borsh.publicKey('feeAccount'), // poolFeeAccount\n  borsh.u64('tradeFeeNumerator'),\n  borsh.u64('tradeFeeDenominator'),\n  borsh.u64('ownerTradeFeeNumerator'),\n  borsh.u64('ownerTradeFeeDenominator'),\n  borsh.u64('ownerWithdrawFeeNumerator'),\n  borsh.u64('ownerWithdrawFeeDenominator'),\n  borsh.u64('hostFeeNumerator'),\n  borsh.u64('hostFeeDenominator'),\n  borsh.u8('curveType'),\n  borsh.vecU8('curveParameters'),\n]);\n\n/**\n * Decode a Pair account from raw account data.\n * Does not expect or validate discriminators.\n */\nexport function decodePairAccount(data: Buffer): AMMPairAccount {\n  try {\n    const decoded = tokenSwapLayout.decode(data);\n\n    // Transform the flat structure into the expected AMMPairAccount format\n    // Convert bigint to BN for compatibility with Anchor types\n    // Ensure PublicKey instances are properly constructed\n    return {\n      version: decoded.version,\n      isInitialized: decoded.isInitialized !== 0,\n      bumpSeed: decoded.bumpSeed,\n      tokenProgramId: new PublicKey(decoded.tokenProgramId),\n      tokenA: new PublicKey(decoded.tokenAccountA),\n      tokenB: new PublicKey(decoded.tokenAccountB),\n      poolMint: new PublicKey(decoded.tokenPool),\n      tokenAMint: new PublicKey(decoded.mintA),\n      tokenBMint: new PublicKey(decoded.mintB),\n      poolFeeAccount: new PublicKey(decoded.feeAccount),\n      fees: {\n        tradeFeeNumerator: new BN(decoded.tradeFeeNumerator.toString()),\n        tradeFeeDenominator: new BN(decoded.tradeFeeDenominator.toString()),\n        ownerTradeFeeNumerator: new BN(decoded.ownerTradeFeeNumerator.toString()),\n        ownerTradeFeeDenominator: new BN(decoded.ownerTradeFeeDenominator.toString()),\n        ownerWithdrawFeeNumerator: new BN(decoded.ownerWithdrawFeeNumerator.toString()),\n        ownerWithdrawFeeDenominator: new BN(decoded.ownerWithdrawFeeDenominator.toString()),\n        hostFeeNumerator: new BN(decoded.hostFeeNumerator.toString()),\n        hostFeeDenominator: new BN(decoded.hostFeeDenominator.toString()),\n      },\n      swapCurve: decodeCurveType(decoded.curveType),\n    };\n  } catch (error) {\n    throw new Error(`Failed to decode Pair account: ${error}`);\n  }\n}\n\n/**\n * Decode curve type from u8 to enum variant\n */\nfunction decodeCurveType(curveType: number): any {\n  switch (curveType) {\n    case 0:\n      return { constantProduct: {} };\n    case 1:\n      return { constantPrice: {} };\n    case 2:\n      return { stable: {} };\n    case 3:\n      return { offset: {} };\n    default:\n      return { constantProduct: {} };\n  }\n}\n","import { BN } from '@coral-xyz/anchor';\nimport { PublicKey, Transaction } from '@solana/web3.js';\nimport * as spl from '@solana/spl-token';\nimport { SarosBaseService, SarosAMMConfig } from './base';\nimport {\n  AMMPairAccount,\n  PairMetadata,\n  QuoteParams,\n  QuoteResponse,\n  SwapParams,\n  SwapCurveType,\n  FeeMetadata,\n  AddLiquidityParams,\n  RemoveLiquidityParams,\n} from '../types';\nimport { calculateSwapOutput, calculatePriceImpact, getMinOutputWithSlippage } from '../utils/calculations';\nimport { derivePoolAuthority } from '../utils/pda';\nimport { SarosAMMError } from '../utils/errors';\nimport { decodePairAccount } from '../utils/legacyAccountDecoder';\n\nexport class SarosAMMPair extends SarosBaseService {\n  private pairAddress: PublicKey;\n  private pairAccount!: AMMPairAccount;\n  private metadata!: PairMetadata;\n\n  private poolAuthority?: PublicKey;\n\n  constructor(config: SarosAMMConfig, pairAddress: PublicKey) {\n    super(config);\n    this.pairAddress = pairAddress;\n  }\n\n  /**\n   * Get the pair address\n   */\n  public getPairAddress(): PublicKey {\n    return this.pairAddress;\n  }\n\n  /**\n   * Get the pair account data\n   */\n  public getPairAccount(): AMMPairAccount {\n    if (!this.pairAccount) {\n      throw SarosAMMError.PairNotInitialized();\n    }\n    return this.pairAccount;\n  }\n\n  /**\n   * Get the pair metadata\n   */\n  public getPairMetadata(): PairMetadata {\n    if (!this.metadata) {\n      throw SarosAMMError.PairNotInitialized();\n    }\n    return this.metadata;\n  }\n\n  /**\n   * Fetch and refresh pair state from chain\n   */\n  public async refreshState(): Promise<void> {\n    try {\n      const accountInfo = await this.connection.getAccountInfo(this.pairAddress);\n      if (!accountInfo) {\n        throw SarosAMMError.PairFetchFailed();\n      }\n\n      // Use legacy decoder since Saros AMM doesn't use discriminators\n      this.pairAccount = decodePairAccount(accountInfo.data);\n\n      // Derive pool authority\n      const [poolAuthority] = derivePoolAuthority(this.pairAddress, this.ammProgram.programId);\n      this.poolAuthority = poolAuthority;\n\n      // Build metadata with current reserves\n      this.metadata = await this.buildPairMetadata();\n    } catch (error) {\n      SarosAMMError.handleError(error, SarosAMMError.PairFetchFailed());\n    }\n  }\n\n  /**\n   * Get a quote for a swap\n   */\n  public async getQuote(params: QuoteParams): Promise<QuoteResponse> {\n    if (params.amount <= 0n) throw SarosAMMError.ZeroAmount();\n    if (params.slippage < 0 || params.slippage >= 100) {\n      throw SarosAMMError.InvalidSlippage();\n    }\n\n    try {\n      const { amount, swapForY, slippage } = params;\n\n      // Get current reserves\n      const { tokenX, tokenY } = this.metadata;\n      if (!tokenX.reserve || !tokenY.reserve) {\n        throw SarosAMMError.PairNotInitialized();\n      }\n\n      const reserveIn = swapForY ? tokenX.reserve : tokenY.reserve;\n      const reserveOut = swapForY ? tokenY.reserve : tokenX.reserve;\n\n      // Calculate output\n      const { tradeFeeNumerator, tradeFeeDenominator } = this.pairAccount.fees;\n\n      const amountOut = calculateSwapOutput(\n        amount,\n        reserveIn,\n        reserveOut,\n        BigInt(tradeFeeNumerator.toString()),\n        BigInt(tradeFeeDenominator.toString())\n      );\n\n      // Apply slippage\n      const minAmountOut = getMinOutputWithSlippage(amountOut, slippage);\n\n      // Calculate price impact\n      const priceImpact = calculatePriceImpact(amount, amountOut, reserveIn, reserveOut);\n\n      // Calculate rate\n      const rate = Number(amountOut) / Number(amount);\n\n      return {\n        amountIn: amount,\n        amountOut,\n        minAmountOut,\n        priceImpact,\n        rate,\n      };\n    } catch (error) {\n      SarosAMMError.handleError(error, SarosAMMError.QuoteCalculationFailed());\n    }\n  }\n\n  /**\n   * Execute a swap transaction\n   */\n  public async swap(params: SwapParams): Promise<Transaction> {\n    try {\n      const { amount, minAmountOut, swapForY, payer, transaction } = params;\n\n      if (amount <= 0n) throw SarosAMMError.ZeroAmount();\n      if (minAmountOut < 0n) throw SarosAMMError.InvalidSlippage();\n\n      const tx = transaction || new Transaction();\n\n      const { tokenAMint, tokenBMint, tokenA, tokenB, poolMint } = this.pairAccount;\n\n      // Get or create user token accounts\n      const userTokenA = params.userTokenX || (await spl.getAssociatedTokenAddress(tokenAMint, payer, true));\n      const userTokenB = params.userTokenY || (await spl.getAssociatedTokenAddress(tokenBMint, payer, true));\n\n      // Determine source and destination based on swap direction\n      const [sourceToken, destToken, poolSource, poolDest] = swapForY\n        ? [userTokenA, userTokenB, tokenA, tokenB]\n        : [userTokenB, userTokenA, tokenB, tokenA];\n\n      // Build swap instruction\n      const swapIx = await this.ammProgram.methods\n        .swap(new BN(amount.toString()), new BN(minAmountOut.toString()))\n        .accountsPartial({\n          swapInfo: this.pairAddress,\n          authorityInfo: this.poolAuthority,\n          userTransferAuthorityInfo: payer,\n          sourceInfo: sourceToken,\n          swapSourceInfo: poolSource,\n          swapDestinationInfo: poolDest,\n          destinationInfo: destToken,\n          poolMintInfo: poolMint,\n          poolFeeAccountInfo: this.pairAccount.poolFeeAccount,\n          tokenProgramInfo: spl.TOKEN_PROGRAM_ID,\n        })\n        .instruction();\n\n      tx.add(swapIx);\n      return tx;\n    } catch (error) {\n      SarosAMMError.handleError(error, SarosAMMError.SwapFailed());\n    }\n  }\n\n  /**\n   * Add liquidity to an existing pool\n   *\n   * Calculates required token amounts based on current pool ratios and creates\n   * a transaction to deposit tokens and mint LP tokens.\n   */\n  public async addLiquidity(params: AddLiquidityParams): Promise<Transaction> {\n    try {\n      const { poolTokenAmount, maximumTokenA, maximumTokenB, payer, transaction } = params;\n\n      if (poolTokenAmount <= 0n) throw SarosAMMError.ZeroAmount();\n      if (maximumTokenA <= 0n || maximumTokenB <= 0n) throw SarosAMMError.InvalidSlippage();\n\n      const tx = transaction || new Transaction();\n\n      const { tokenAMint, tokenBMint, tokenA, tokenB, poolMint } = this.pairAccount;\n\n      const userTokenA = params.userTokenX || (await spl.getAssociatedTokenAddress(tokenAMint, payer, true));\n      const userTokenB = params.userTokenY || (await spl.getAssociatedTokenAddress(tokenBMint, payer, true));\n      const userLpToken = params.userLpToken || (await spl.getAssociatedTokenAddress(poolMint, payer, true));\n\n      const depositIx = await this.ammProgram.methods\n        .depositAllTokenTypes(\n          new BN(poolTokenAmount.toString()),\n          new BN(maximumTokenA.toString()),\n          new BN(maximumTokenB.toString())\n        )\n        .accountsPartial({\n          swapInfo: this.pairAddress,\n          authorityInfo: this.poolAuthority,\n          userTransferAuthorityInfo: payer,\n          sourceAInfo: userTokenA,\n          sourceBInfo: userTokenB,\n          tokenAInfo: tokenA,\n          tokenBInfo: tokenB,\n          poolMintInfo: poolMint,\n          destInfo: userLpToken,\n          tokenProgramInfo: spl.TOKEN_PROGRAM_ID,\n        })\n        .instruction();\n\n      tx.add(depositIx);\n      return tx;\n    } catch (error) {\n      SarosAMMError.handleError(error, SarosAMMError.AddLiquidityFailed());\n    }\n  }\n\n  /**\n   * Remove liquidity from a pool\n   *\n   * Burns LP tokens and withdraws proportional amounts of underlying tokens.\n   */\n  public async removeLiquidity(params: RemoveLiquidityParams): Promise<Transaction> {\n    try {\n      const { poolTokenAmount, minimumTokenA, minimumTokenB, payer, transaction } = params;\n\n      if (poolTokenAmount <= 0n) throw SarosAMMError.ZeroAmount();\n      if (minimumTokenA < 0n || minimumTokenB < 0n) throw SarosAMMError.InvalidSlippage();\n\n      const tx = transaction || new Transaction();\n\n      const { tokenAMint, tokenBMint, tokenA, tokenB, poolMint, poolFeeAccount } = this.pairAccount;\n\n      const userTokenA = params.userTokenX || (await spl.getAssociatedTokenAddress(tokenAMint, payer, true));\n      const userTokenB = params.userTokenY || (await spl.getAssociatedTokenAddress(tokenBMint, payer, true));\n      const userLpToken = params.userLpToken || (await spl.getAssociatedTokenAddress(poolMint, payer, true));\n\n      const withdrawIx = await this.ammProgram.methods\n        .withdrawAllTokenTypes(\n          new BN(poolTokenAmount.toString()),\n          new BN(minimumTokenA.toString()),\n          new BN(minimumTokenB.toString())\n        )\n        .accountsPartial({\n          swapInfo: this.pairAddress,\n          authorityInfo: this.poolAuthority,\n          userTransferAuthorityInfo: payer,\n          poolMintInfo: poolMint,\n          sourceInfo: userLpToken,\n          tokenAInfo: tokenA,\n          tokenBInfo: tokenB,\n          destTokenAInfo: userTokenA,\n          destTokenBInfo: userTokenB,\n          poolFeeAccountInfo: poolFeeAccount,\n          tokenProgramInfo: spl.TOKEN_PROGRAM_ID,\n        })\n        .instruction();\n\n      tx.add(withdrawIx);\n      return tx;\n    } catch (error) {\n      SarosAMMError.handleError(error, SarosAMMError.RemoveLiquidityFailed());\n    }\n  }\n\n  private async buildPairMetadata(): Promise<PairMetadata> {\n    const { tokenAMint, tokenBMint, tokenA, tokenB, poolMint, poolFeeAccount, fees, swapCurve } = this.pairAccount;\n\n    // Fetch token account data for reserves\n    const [tokenAInfo, tokenBInfo] = await Promise.all([\n      this.connection.getAccountInfo(tokenA),\n      this.connection.getAccountInfo(tokenB),\n    ]);\n\n    const tokenAData = tokenAInfo ? spl.AccountLayout.decode(tokenAInfo.data) : null;\n    const tokenBData = tokenBInfo ? spl.AccountLayout.decode(tokenBInfo.data) : null;\n\n    // Fetch mint info for decimals\n    const [mintAInfo, mintBInfo, poolMintInfo] = await Promise.all([\n      spl.getMint(this.connection, tokenAMint),\n      spl.getMint(this.connection, tokenBMint),\n      spl.getMint(this.connection, poolMint),\n    ]);\n\n    const curveType = this.getCurveType(swapCurve);\n\n    return {\n      pair: this.pairAddress,\n      tokenX: {\n        mint: tokenAMint,\n        decimals: mintAInfo.decimals,\n        reserve: tokenAData ? BigInt(tokenAData.amount.toString()) : 0n,\n      },\n      tokenY: {\n        mint: tokenBMint,\n        decimals: mintBInfo.decimals,\n        reserve: tokenBData ? BigInt(tokenBData.amount.toString()) : 0n,\n      },\n      lpToken: {\n        mint: poolMint,\n        decimals: poolMintInfo.decimals,\n      },\n      feeAccount: poolFeeAccount,\n      curve: curveType,\n      fees: this.calculateFeePercentages(fees),\n    };\n  }\n\n  private getCurveType(curve: any): SwapCurveType {\n    if ('constantProduct' in curve) return SwapCurveType.ConstantProduct;\n    if ('constantPrice' in curve) return SwapCurveType.ConstantPrice;\n    if ('stable' in curve) return SwapCurveType.Stable;\n    if ('offset' in curve) return SwapCurveType.Offset;\n    return SwapCurveType.ConstantProduct;\n  }\n\n  private calculateFeePercentages(fees: any): FeeMetadata {\n    // Helper to calculate fee percentage, returns 0 if denominator is 0\n    const calcFee = (numerator: BN, denominator: BN): number => {\n      const denom = Number(denominator);\n      return denom === 0 ? 0 : (Number(numerator) / denom) * 100;\n    };\n\n    return {\n      tradeFee: calcFee(fees.tradeFeeNumerator, fees.tradeFeeDenominator),\n      ownerTradeFee: calcFee(fees.ownerTradeFeeNumerator, fees.ownerTradeFeeDenominator),\n      ownerWithdrawFee: calcFee(fees.ownerWithdrawFeeNumerator, fees.ownerWithdrawFeeDenominator),\n      hostFee: calcFee(fees.hostFeeNumerator, fees.hostFeeDenominator),\n    };\n  }\n}\n","import { Connection, Keypair, SystemProgram, Transaction } from '@solana/web3.js';\nimport * as spl from '@solana/spl-token';\nimport type { Program } from '@coral-xyz/anchor';\nimport {\n  SAROS_FEE_OWNER,\n  CURVE_TYPE_MAP,\n  DEFAULT_FEES,\n  DEFAULT_SWAP_CALCULATOR,\n  SWAP_ACCOUNT_SIZE,\n} from '../constants/config';\nimport { derivePoolAuthority } from '../utils/pda';\nimport type { CreatePairParams, CreatePairResult } from '../types';\nimport type { SarosSwap } from '../constants/idl/amm';\n\nexport async function buildCreatePairTransaction(args: {\n  connection: Connection;\n  ammProgram: Program<SarosSwap>;\n  params: CreatePairParams;\n}): Promise<CreatePairResult> {\n  const { connection, ammProgram, params } = args;\n  const { payer, tokenAMint, tokenBMint, curveType, initialTokenAAmount, initialTokenBAmount } = params;\n  const feeOwner = params.feeOwner ?? SAROS_FEE_OWNER;\n\n  const swapInfoKeypair = Keypair.generate();\n  const lpMintKeypair = Keypair.generate();\n\n  const [poolAuthority] = derivePoolAuthority(swapInfoKeypair.publicKey, ammProgram.programId);\n\n  const poolTokenA = await spl.getAssociatedTokenAddress(tokenAMint, poolAuthority, true);\n  const poolTokenB = await spl.getAssociatedTokenAddress(tokenBMint, poolAuthority, true);\n  const userLpTokenAccount = await spl.getAssociatedTokenAddress(lpMintKeypair.publicKey, payer);\n  const feeAccount = await spl.getAssociatedTokenAddress(lpMintKeypair.publicKey, feeOwner);\n  const userTokenA = await spl.getAssociatedTokenAddress(tokenAMint, payer);\n  const userTokenB = await spl.getAssociatedTokenAddress(tokenBMint, payer);\n  const shouldCreateFeeAccountAta = !feeAccount.equals(userLpTokenAccount);\n\n  const [swapAccountRent, mintRent, { blockhash }] = await Promise.all([\n    connection.getMinimumBalanceForRentExemption(SWAP_ACCOUNT_SIZE),\n    connection.getMinimumBalanceForRentExemption(spl.MINT_SIZE),\n    connection.getLatestBlockhash(),\n  ]);\n\n  const tx = new Transaction();\n  tx.recentBlockhash = blockhash;\n  tx.feePayer = payer;\n\n  // 1) Create and initialize LP mint (legacy Saros pools use 2 decimals)\n  tx.add(\n    SystemProgram.createAccount({\n      fromPubkey: payer,\n      newAccountPubkey: lpMintKeypair.publicKey,\n      space: spl.MINT_SIZE,\n      lamports: mintRent,\n      programId: spl.TOKEN_PROGRAM_ID,\n    }),\n    spl.createInitializeMintInstruction(lpMintKeypair.publicKey, 2, poolAuthority, null)\n  );\n\n  // 2) Create pool token accounts (ATAs owned by PDA)\n  tx.add(\n    spl.createAssociatedTokenAccountInstruction(payer, poolTokenA, poolAuthority, tokenAMint),\n    spl.createAssociatedTokenAccountInstruction(payer, poolTokenB, poolAuthority, tokenBMint)\n  );\n\n  // 3) Create user LP token ATA (idempotent)\n  tx.add(\n    spl.createAssociatedTokenAccountIdempotentInstruction(payer, userLpTokenAccount, payer, lpMintKeypair.publicKey)\n  );\n\n  // 4) Create fee account ATA (idempotent) if different from destination\n  if (shouldCreateFeeAccountAta) {\n    tx.add(spl.createAssociatedTokenAccountIdempotentInstruction(payer, feeAccount, feeOwner, lpMintKeypair.publicKey));\n  }\n\n  // 5) Transfer initial liquidity to pool\n  tx.add(\n    spl.createTransferInstruction(userTokenA, poolTokenA, payer, initialTokenAAmount),\n    spl.createTransferInstruction(userTokenB, poolTokenB, payer, initialTokenBAmount)\n  );\n\n  // 6) Create swap account\n  tx.add(\n    SystemProgram.createAccount({\n      fromPubkey: payer,\n      newAccountPubkey: swapInfoKeypair.publicKey,\n      space: SWAP_ACCOUNT_SIZE,\n      lamports: swapAccountRent,\n      programId: ammProgram.programId,\n    })\n  );\n\n  // 7) Initialize swap\n  const initIx = await ammProgram.methods\n    .initialize(DEFAULT_FEES, CURVE_TYPE_MAP[curveType], DEFAULT_SWAP_CALCULATOR)\n    .accounts({\n      swapInfo: swapInfoKeypair.publicKey,\n      authorityInfo: poolAuthority,\n      tokenAInfo: poolTokenA,\n      tokenBInfo: poolTokenB,\n      poolMintInfo: lpMintKeypair.publicKey,\n      feeAccountInfo: feeAccount,\n      destinationInfo: userLpTokenAccount,\n      tokenProgramInfo: spl.TOKEN_PROGRAM_ID,\n    })\n    .instruction();\n  tx.add(initIx);\n\n  const signers = [lpMintKeypair, swapInfoKeypair];\n\n  return {\n    transaction: tx,\n    pairAddress: swapInfoKeypair.publicKey,\n    lpTokenMint: lpMintKeypair.publicKey,\n    pairKeypair: swapInfoKeypair,\n    lpMintKeypair,\n    poolTokenA,\n    poolTokenB,\n    feeAccount,\n    pairAuthority: poolAuthority,\n    signers,\n  };\n}\n","import { PublicKey } from '@solana/web3.js';\nimport { SarosBaseService, type SarosAMMConfig } from './base';\nimport { SarosAMMPair } from './pair';\nimport type { CreatePairParams, CreatePairResult } from '../types';\nimport { SWAP_ACCOUNT_SIZE } from '../constants/config';\nimport { buildCreatePairTransaction } from './createPair';\nimport { SarosAMMError } from '../utils/errors';\n\nconst TOKEN_A_MINT_OFFSET = 131;\nconst TOKEN_B_MINT_OFFSET = TOKEN_A_MINT_OFFSET + 32;\n\n/**\n * High-level Saros AMM class.\n * This class is the recommended entry point for protocol operations and\n * returns SarosAMMPair instances with state ready for use.\n */\nexport class SarosAMM extends SarosBaseService {\n  constructor(config: SarosAMMConfig) {\n    super(config);\n  }\n\n  /**\n   * Create a new Saros AMM pair.\n   * Returns an unsigned transaction plus helper metadata for signing and sending.\n   */\n  public async createPair(params: CreatePairParams): Promise<CreatePairResult> {\n    try {\n      return await buildCreatePairTransaction({\n        connection: this.connection,\n        ammProgram: this.ammProgram,\n        params,\n      });\n    } catch (error) {\n      SarosAMMError.handleError(error, SarosAMMError.PairCreationFailed());\n    }\n  }\n\n  /**\n   * Instantiate a SarosAMMPair for the provided pair address.\n   */\n  public async getPair(pairAddress: PublicKey): Promise<SarosAMMPair> {\n    const pair = new SarosAMMPair(this.config, pairAddress);\n    await pair.refreshState();\n    return pair;\n  }\n\n  /**\n   * Batch helper for fetching multiple pairs in parallel.\n   */\n  public async getPairs(pairAddresses: PublicKey[]): Promise<SarosAMMPair[]> {\n    return Promise.all(pairAddresses.map((address) => this.getPair(address)));\n  }\n\n  /**\n   * Discover every Saros AMM pair on the configured cluster.\n   */\n  public async getAllPairAddresses(): Promise<string[]> {\n    const accounts = await this.connection.getProgramAccounts(this.getDexProgramId(), {\n      filters: [{ dataSize: SWAP_ACCOUNT_SIZE }],\n    });\n    return accounts.map((acc) => acc.pubkey.toBase58());\n  }\n\n  /**\n   * Find pairs that contain a token mint. Optionally restrict the search to a\n   * specific pair by supplying `mintB`.\n   */\n  public async findPairs(mintA: PublicKey, mintB?: PublicKey): Promise<string[]> {\n    const programId = this.getDexProgramId();\n    const filters = [{ dataSize: SWAP_ACCOUNT_SIZE }];\n\n    const [accountsX, accountsY] = await Promise.all([\n      this.connection.getProgramAccounts(programId, {\n        filters: [{ memcmp: { offset: TOKEN_A_MINT_OFFSET, bytes: mintA.toBase58() } }, ...filters],\n      }),\n      this.connection.getProgramAccounts(programId, {\n        filters: [{ memcmp: { offset: TOKEN_B_MINT_OFFSET, bytes: mintA.toBase58() } }, ...filters],\n      }),\n    ]);\n\n    const deduped = new Map<string, Buffer>();\n    [...accountsX, ...accountsY].forEach((account) => {\n      deduped.set(account.pubkey.toBase58(), account.account.data);\n    });\n\n    let matches = Array.from(deduped.entries());\n\n    if (mintB) {\n      matches = matches.filter(([, data]) => {\n        const tokenAMint = new PublicKey(data.slice(TOKEN_A_MINT_OFFSET, TOKEN_A_MINT_OFFSET + 32));\n        const tokenBMint = new PublicKey(data.slice(TOKEN_B_MINT_OFFSET, TOKEN_B_MINT_OFFSET + 32));\n\n        return (\n          (tokenAMint.equals(mintA) && tokenBMint.equals(mintB)) ||\n          (tokenAMint.equals(mintB) && tokenBMint.equals(mintA))\n        );\n      });\n    }\n\n    return matches.map(([address]) => address);\n  }\n}\n","export type SarosFarmIDL = {\n  address: 'FARMr8rFJohG2CXFWKKmj8Z3XAhZNdYZ5CE3TKeWpump';\n  metadata: {\n    name: 'saros_farm';\n    version: '0.1.0';\n    spec: '0.1.0';\n  };\n  version: '0.1.0';\n  name: 'saros_farm';\n  instructions: [\n    {\n      name: 'createPool';\n      accounts: [\n        {\n          name: 'root';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'Pool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'poolPath';\n          type: 'bytes';\n        },\n        {\n          name: 'poolNonce';\n          type: 'u8';\n        },\n        {\n          name: 'poolAuthorityNonce';\n          type: 'u8';\n        },\n        {\n          name: 'stakingTokenMint';\n          type: 'publicKey';\n        },\n      ];\n    },\n    {\n      name: 'createPoolReward';\n      accounts: [\n        {\n          name: 'root';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'Pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'PoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'rootRewardTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolRewardTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'poolRewardNonce';\n          type: 'u8';\n        },\n        {\n          name: 'poolRewardAuthorityNonce';\n          type: 'u8';\n        },\n        {\n          name: 'rewardTokenMint';\n          type: 'publicKey';\n        },\n        {\n          name: 'rewardPerBlock';\n          type: 'u128';\n        },\n        {\n          name: 'rewardStartBlock';\n          type: 'u64';\n        },\n        {\n          name: 'rewardEndBlock';\n          type: 'u64';\n        },\n      ];\n    },\n    {\n      name: 'setPausePool';\n      accounts: [\n        {\n          name: 'root';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'Pool';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'isPause';\n          type: 'bool';\n        },\n      ];\n    },\n    {\n      name: 'setPauseRewardPool';\n      accounts: [\n        {\n          name: 'root';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'PoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'isPause';\n          type: 'bool';\n        },\n      ];\n    },\n    {\n      name: 'createUserPool';\n      accounts: [\n        {\n          name: 'user';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'Pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userPool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'userPoolNonce';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'createUserPoolReward';\n      accounts: [\n        {\n          name: 'user';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'PoolReward';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userPoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'userPoolRewardNonce';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'stakePool';\n      accounts: [\n        {\n          name: 'Pool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolStakingTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'user';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userPool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userStakingTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'amount';\n          type: 'u64';\n        },\n      ];\n    },\n    {\n      name: 'stakePoolReward';\n      accounts: [\n        {\n          name: 'Pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'PoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'user';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userPool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userPoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n    {\n      name: 'unstakePoolReward';\n      accounts: [\n        {\n          name: 'Pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'PoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'user';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userPool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userPoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n    {\n      name: 'claimReward';\n      accounts: [\n        {\n          name: 'PoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolRewardAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolRewardTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'user';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userPoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userRewardTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n    {\n      name: 'unstakePool';\n      accounts: [\n        {\n          name: 'Pool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolStakingTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'user';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userPool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userStakingTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'amount';\n          type: 'u64';\n        },\n      ];\n    },\n    {\n      name: 'updatePoolRewardParams';\n      accounts: [\n        {\n          name: 'root';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'PoolReward';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'rootRewardTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolRewardTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'newRewardPerBlock';\n          type: 'u128';\n        },\n        {\n          name: 'newStartBlock';\n          type: 'u64';\n        },\n        {\n          name: 'newEndBlock';\n          type: 'u64';\n        },\n      ];\n    },\n    {\n      name: 'withdrawRewardToken';\n      accounts: [\n        {\n          name: 'root';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'PoolReward';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'from';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'to';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'amount';\n          type: 'u64';\n        },\n      ];\n    },\n  ];\n  accounts: [\n    {\n      name: 'Pool';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'nonce';\n            type: 'u8';\n          },\n          {\n            name: 'authorityNonce';\n            type: 'u8';\n          },\n          {\n            name: 'stakingTokenMint';\n            type: 'publicKey';\n          },\n          {\n            name: 'stakingTokenAccount';\n            type: 'publicKey';\n          },\n          {\n            name: 'state';\n            type: {\n              defined: 'PoolState';\n            };\n          },\n        ];\n      };\n    },\n    {\n      name: 'PoolReward';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'nonce';\n            type: 'u8';\n          },\n          {\n            name: 'authorityNonce';\n            type: 'u8';\n          },\n          {\n            name: 'rewardTokenMint';\n            type: 'publicKey';\n          },\n          {\n            name: 'rewardTokenAccount';\n            type: 'publicKey';\n          },\n          {\n            name: 'rewardPerBlock';\n            type: 'u128';\n          },\n          {\n            name: 'rewardEndBlock';\n            type: 'u64';\n          },\n          {\n            name: 'totalShares';\n            type: 'u64';\n          },\n          {\n            name: 'accumulatedRewardPerShare';\n            type: 'u128';\n          },\n          {\n            name: 'lastUpdatedBlock';\n            type: 'u64';\n          },\n          {\n            name: 'totalClaimed';\n            type: 'u64';\n          },\n          {\n            name: 'state';\n            type: {\n              defined: 'PoolState';\n            };\n          },\n        ];\n      };\n    },\n    {\n      name: 'UserPool';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'nonce';\n            type: 'u8';\n          },\n          {\n            name: 'amount';\n            type: 'u64';\n          },\n          {\n            name: 'totalStaked';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n    {\n      name: 'UserPoolReward';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'nonce';\n            type: 'u8';\n          },\n          {\n            name: 'amount';\n            type: 'u64';\n          },\n          {\n            name: 'rewardDebt';\n            type: 'u64';\n          },\n          {\n            name: 'rewardPending';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n  ];\n  types: [\n    {\n      name: 'TransferTokenParams';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'instruction';\n            type: 'u8';\n          },\n          {\n            name: 'amount';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n    {\n      name: 'PoolState';\n      type: {\n        kind: 'enum';\n        variants: [\n          {\n            name: 'Paused';\n          },\n          {\n            name: 'Unpaused';\n          },\n        ];\n      };\n    },\n  ];\n  events: [\n    {\n      name: 'SetPausePoolEvent';\n      fields: [\n        {\n          name: 'isPause';\n          type: 'bool';\n          index: false;\n        },\n      ];\n    },\n    {\n      name: 'SetPauseRewardPoolEvent';\n      fields: [\n        {\n          name: 'isPause';\n          type: 'bool';\n          index: false;\n        },\n      ];\n    },\n    {\n      name: 'UpdatePoolRewardParamsEvent';\n      fields: [\n        {\n          name: 'newRewardPerBlock';\n          type: 'u128';\n          index: false;\n        },\n        {\n          name: 'newStartBlock';\n          type: 'u64';\n          index: false;\n        },\n        {\n          name: 'newEndBlock';\n          type: 'u64';\n          index: false;\n        },\n      ];\n    },\n    {\n      name: 'WithdrawRewardTokenEvent';\n      fields: [\n        {\n          name: 'amount';\n          type: 'u64';\n          index: false;\n        },\n      ];\n    },\n  ];\n  errors: [\n    {\n      code: 6000;\n      name: 'InvalidOwner';\n      msg: 'SarosFarm: Not an owner.';\n    },\n    {\n      code: 6001;\n      name: 'InvalidPoolLpTokenAccount';\n      msg: 'SarosFarm: Invalid pool LP token account.';\n    },\n    {\n      code: 6002;\n      name: 'InvalidPoolRewardTokenAccount';\n      msg: 'SarosFarm: Invalid reward token account.';\n    },\n    {\n      code: 6003;\n      name: 'InvalidWithdrawAmount';\n      msg: 'SarosFarm: Invalid withdraw amount.';\n    },\n    {\n      code: 6004;\n      name: 'CantWithdrawNow';\n      msg: 'SarosFarm: Cannot withdraw now.';\n    },\n    {\n      code: 6005;\n      name: 'TimeOverlap';\n      msg: 'SarosFarm: Time overlap.';\n    },\n    {\n      code: 6006;\n      name: 'PoolWasPaused';\n      msg: 'SarosFarm: Pool was paused.';\n    },\n    {\n      code: 6007;\n      name: 'UninitializedAccount';\n      msg: 'SarosFarm: Uninitialized account.';\n    },\n  ];\n};\n\nexport const FARM_IDL: SarosFarmIDL = {\n  address: 'FARMr8rFJohG2CXFWKKmj8Z3XAhZNdYZ5CE3TKeWpump',\n  metadata: {\n    name: 'saros_farm',\n    version: '0.1.0',\n    spec: '0.1.0',\n  },\n  version: '0.1.0',\n  name: 'saros_farm',\n  instructions: [\n    {\n      name: 'createPool',\n      accounts: [\n        {\n          name: 'root',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'Pool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'poolPath',\n          type: 'bytes',\n        },\n        {\n          name: 'poolNonce',\n          type: 'u8',\n        },\n        {\n          name: 'poolAuthorityNonce',\n          type: 'u8',\n        },\n        {\n          name: 'stakingTokenMint',\n          type: 'publicKey',\n        },\n      ],\n    },\n    {\n      name: 'createPoolReward',\n      accounts: [\n        {\n          name: 'root',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'Pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'PoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'rootRewardTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolRewardTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'poolRewardNonce',\n          type: 'u8',\n        },\n        {\n          name: 'poolRewardAuthorityNonce',\n          type: 'u8',\n        },\n        {\n          name: 'rewardTokenMint',\n          type: 'publicKey',\n        },\n        {\n          name: 'rewardPerBlock',\n          type: 'u128',\n        },\n        {\n          name: 'rewardStartBlock',\n          type: 'u64',\n        },\n        {\n          name: 'rewardEndBlock',\n          type: 'u64',\n        },\n      ],\n    },\n    {\n      name: 'setPausePool',\n      accounts: [\n        {\n          name: 'root',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'Pool',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'isPause',\n          type: 'bool',\n        },\n      ],\n    },\n    {\n      name: 'setPauseRewardPool',\n      accounts: [\n        {\n          name: 'root',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'PoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'isPause',\n          type: 'bool',\n        },\n      ],\n    },\n    {\n      name: 'createUserPool',\n      accounts: [\n        {\n          name: 'user',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'Pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userPool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'userPoolNonce',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'createUserPoolReward',\n      accounts: [\n        {\n          name: 'user',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'PoolReward',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userPoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'userPoolRewardNonce',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'stakePool',\n      accounts: [\n        {\n          name: 'Pool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolStakingTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'user',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userPool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userStakingTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'amount',\n          type: 'u64',\n        },\n      ],\n    },\n    {\n      name: 'stakePoolReward',\n      accounts: [\n        {\n          name: 'Pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'PoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'user',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userPool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userPoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n    {\n      name: 'unstakePoolReward',\n      accounts: [\n        {\n          name: 'Pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'PoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'user',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userPool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userPoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n    {\n      name: 'claimReward',\n      accounts: [\n        {\n          name: 'PoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolRewardAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolRewardTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'user',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userPoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userRewardTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n    {\n      name: 'unstakePool',\n      accounts: [\n        {\n          name: 'Pool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolStakingTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'user',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userPool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userStakingTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'amount',\n          type: 'u64',\n        },\n      ],\n    },\n    {\n      name: 'updatePoolRewardParams',\n      accounts: [\n        {\n          name: 'root',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'PoolReward',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'rootRewardTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolRewardTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'newRewardPerBlock',\n          type: 'u128',\n        },\n        {\n          name: 'newStartBlock',\n          type: 'u64',\n        },\n        {\n          name: 'newEndBlock',\n          type: 'u64',\n        },\n      ],\n    },\n    {\n      name: 'withdrawRewardToken',\n      accounts: [\n        {\n          name: 'root',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'PoolReward',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'from',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'to',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'amount',\n          type: 'u64',\n        },\n      ],\n    },\n  ],\n  accounts: [\n    {\n      name: 'Pool',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'nonce',\n            type: 'u8',\n          },\n          {\n            name: 'authorityNonce',\n            type: 'u8',\n          },\n          {\n            name: 'stakingTokenMint',\n            type: 'publicKey',\n          },\n          {\n            name: 'stakingTokenAccount',\n            type: 'publicKey',\n          },\n          {\n            name: 'state',\n            type: {\n              defined: 'PoolState',\n            },\n          },\n        ],\n      },\n    },\n    {\n      name: 'PoolReward',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'nonce',\n            type: 'u8',\n          },\n          {\n            name: 'authorityNonce',\n            type: 'u8',\n          },\n          {\n            name: 'rewardTokenMint',\n            type: 'publicKey',\n          },\n          {\n            name: 'rewardTokenAccount',\n            type: 'publicKey',\n          },\n          {\n            name: 'rewardPerBlock',\n            type: 'u128',\n          },\n          {\n            name: 'rewardEndBlock',\n            type: 'u64',\n          },\n          {\n            name: 'totalShares',\n            type: 'u64',\n          },\n          {\n            name: 'accumulatedRewardPerShare',\n            type: 'u128',\n          },\n          {\n            name: 'lastUpdatedBlock',\n            type: 'u64',\n          },\n          {\n            name: 'totalClaimed',\n            type: 'u64',\n          },\n          {\n            name: 'state',\n            type: {\n              defined: 'PoolState',\n            },\n          },\n        ],\n      },\n    },\n    {\n      name: 'UserPool',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'nonce',\n            type: 'u8',\n          },\n          {\n            name: 'amount',\n            type: 'u64',\n          },\n          {\n            name: 'totalStaked',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n    {\n      name: 'UserPoolReward',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'nonce',\n            type: 'u8',\n          },\n          {\n            name: 'amount',\n            type: 'u64',\n          },\n          {\n            name: 'rewardDebt',\n            type: 'u64',\n          },\n          {\n            name: 'rewardPending',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n  ],\n  types: [\n    {\n      name: 'TransferTokenParams',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'instruction',\n            type: 'u8',\n          },\n          {\n            name: 'amount',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n    {\n      name: 'PoolState',\n      type: {\n        kind: 'enum',\n        variants: [\n          {\n            name: 'Paused',\n          },\n          {\n            name: 'Unpaused',\n          },\n        ],\n      },\n    },\n  ],\n  events: [\n    {\n      name: 'SetPausePoolEvent',\n      fields: [\n        {\n          name: 'isPause',\n          type: 'bool',\n          index: false,\n        },\n      ],\n    },\n    {\n      name: 'SetPauseRewardPoolEvent',\n      fields: [\n        {\n          name: 'isPause',\n          type: 'bool',\n          index: false,\n        },\n      ],\n    },\n    {\n      name: 'UpdatePoolRewardParamsEvent',\n      fields: [\n        {\n          name: 'newRewardPerBlock',\n          type: 'u128',\n          index: false,\n        },\n        {\n          name: 'newStartBlock',\n          type: 'u64',\n          index: false,\n        },\n        {\n          name: 'newEndBlock',\n          type: 'u64',\n          index: false,\n        },\n      ],\n    },\n    {\n      name: 'WithdrawRewardTokenEvent',\n      fields: [\n        {\n          name: 'amount',\n          type: 'u64',\n          index: false,\n        },\n      ],\n    },\n  ],\n  errors: [\n    {\n      code: 6000,\n      name: 'InvalidOwner',\n      msg: 'SarosFarm: Not an owner.',\n    },\n    {\n      code: 6001,\n      name: 'InvalidPoolLpTokenAccount',\n      msg: 'SarosFarm: Invalid pool LP token account.',\n    },\n    {\n      code: 6002,\n      name: 'InvalidPoolRewardTokenAccount',\n      msg: 'SarosFarm: Invalid reward token account.',\n    },\n    {\n      code: 6003,\n      name: 'InvalidWithdrawAmount',\n      msg: 'SarosFarm: Invalid withdraw amount.',\n    },\n    {\n      code: 6004,\n      name: 'CantWithdrawNow',\n      msg: 'SarosFarm: Cannot withdraw now.',\n    },\n    {\n      code: 6005,\n      name: 'TimeOverlap',\n      msg: 'SarosFarm: Time overlap.',\n    },\n    {\n      code: 6006,\n      name: 'PoolWasPaused',\n      msg: 'SarosFarm: Pool was paused.',\n    },\n    {\n      code: 6007,\n      name: 'UninitializedAccount',\n      msg: 'SarosFarm: Uninitialized account.',\n    },\n  ],\n};\n","import type { SarosAPIFarmInfo, SarosAPIStakeInfo } from '../types/api';\n\n/**\n * Thin client for Saros' public REST API (`api.saros.xyz`).\n * The response types are schema-coupled; if the API payload changes, update\n * `SarosAPIFarmInfo` / `SarosAPIStakeInfo`.\n */\nconst SAROS_API_BASE = 'https://api.saros.xyz/api/saros';\n\ninterface SarosAPIResponse<T> {\n  status: number;\n  success: boolean;\n  data: T[];\n}\n\n/**\n * Saros API client with automatic fallback handling\n */\nexport class SarosAPIService {\n  private static async fetchWithFallback<T>(url: string, timeoutMs: number = 5000): Promise<T[] | null> {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), timeoutMs);\n\n      const response = await fetch(url, {\n        signal: controller.signal,\n        headers: {\n          Accept: 'application/json',\n        },\n      });\n\n      clearTimeout(timeout);\n\n      if (!response.ok) {\n        console.warn(`Saros API returned ${response.status} for ${url}`);\n        return null;\n      }\n\n      const json: SarosAPIResponse<T> = await response.json();\n\n      if (!json.success || !Array.isArray(json.data)) {\n        console.warn('Saros API returned invalid response format');\n        return null;\n      }\n\n      return json.data;\n    } catch (error) {\n      // API is down or unreachable - fail silently and return null\n      if (error instanceof Error) {\n        console.warn(`Saros API unavailable: ${error.message}`);\n      }\n      return null;\n    }\n  }\n\n  /**\n   * Fetch all farm information from Saros API\n   * Returns null if API is unavailable\n   */\n  static async getFarmInfo(page: number = 1, size: number = 100): Promise<SarosAPIFarmInfo[] | null> {\n    const url = `${SAROS_API_BASE}/information?page=${page}&size=${size}&type=farm`;\n    return this.fetchWithFallback<SarosAPIFarmInfo>(url);\n  }\n\n  /**\n   * Fetch all stake information from Saros API\n   * Returns null if API is unavailable\n   */\n  static async getStakeInfo(page: number = 1, size: number = 100): Promise<SarosAPIStakeInfo[] | null> {\n    const url = `${SAROS_API_BASE}/information?page=${page}&size=${size}&type=stake`;\n    return this.fetchWithFallback<SarosAPIStakeInfo>(url);\n  }\n\n  /**\n   * Fetch farm info for a specific pool address\n   * Returns null if not found or API unavailable\n   */\n  static async getFarmByPool(poolAddress: string): Promise<SarosAPIFarmInfo | null> {\n    const farms = await this.getFarmInfo();\n    if (!farms) return null;\n\n    return farms.find((farm) => farm.poolAddress === poolAddress) || null;\n  }\n\n  /**\n   * Fetch stake info for a specific pool address\n   * Returns null if not found or API unavailable\n   */\n  static async getStakeByPool(poolAddress: string): Promise<SarosAPIStakeInfo | null> {\n    const stakes = await this.getStakeInfo();\n    if (!stakes) return null;\n\n    return stakes.find((stake) => stake.poolAddress === poolAddress) || null;\n  }\n}\n","import { Connection, PublicKey, Transaction, SystemProgram } from '@solana/web3.js';\nimport { AnchorProvider, Program, Wallet, BN } from '@coral-xyz/anchor';\nimport * as spl from '@solana/spl-token';\nimport { FARM_PROGRAM_IDS } from '../constants/config';\nimport { FARM_IDL } from '../constants/idl/farm';\nimport { SarosAPIService } from './api';\nimport { SarosAMMError } from '../utils/errors';\nimport {\n  deriveFarmUserPoolAddress,\n  deriveFarmUserPoolRewardAddress,\n  deriveFarmPoolAuthority,\n  deriveFarmPoolRewardAuthority,\n} from '../utils/pda';\nimport type { PoolAccount, StakeParams, UnstakeParams, ClaimRewardParams, UserPosition } from '../types/farm';\nimport type { SarosAPIFarmInfo, SarosAPIStakeInfo } from '../types/api';\nimport { SarosAMMConfig } from './base';\n\n/**\n * Pool type for API filtering only (farm vs stake).\n * On-chain, both use the same Pool account structure.\n */\nexport type PoolType = 'farm' | 'stake';\n\n/**\n * Unified farming service for both LP token farming and single token staking\n */\nexport class SarosFarm {\n  private config: SarosAMMConfig;\n  private connection: Connection;\n  private farmProgram!: Program;\n  private poolAddress: PublicKey;\n  private poolType: PoolType;\n\n  private poolAccount?: PoolAccount;\n  private apiInfo?: SarosAPIFarmInfo | SarosAPIStakeInfo;\n\n  /**\n   * Typed accessor for program accounts\n   */\n  private get accounts() {\n    return this.farmProgram.account as any;\n  }\n\n  constructor(config: SarosAMMConfig, poolAddress: PublicKey, poolType: PoolType = 'farm') {\n    this.config = config;\n    this.connection = config.connection;\n    this.poolAddress = poolAddress;\n    this.poolType = poolType;\n\n    const provider = new AnchorProvider(this.connection, {} as Wallet, AnchorProvider.defaultOptions());\n\n    // Get program ID for the specified network\n    const programId = FARM_PROGRAM_IDS[config.mode];\n\n    // Create program instance with network-specific program ID and shared IDL from mainnet\n    this.farmProgram = new Program({ ...FARM_IDL, address: programId.toBase58() } as any, provider);\n  }\n\n  /**\n   * Refresh pool state from on-chain and API\n   */\n  public async refreshState(): Promise<void> {\n    try {\n      // Fetch on-chain pool account\n      const poolAccountData = await this.accounts.pool.fetch(this.poolAddress);\n\n      this.poolAccount = {\n        nonce: poolAccountData.nonce,\n        authorityNonce: poolAccountData.authorityNonce,\n        stakingTokenMint: poolAccountData.stakingTokenMint,\n        stakingTokenAccount: poolAccountData.stakingTokenAccount,\n        state: poolAccountData.state,\n      };\n\n      // Fetch API info with fallback\n      this.apiInfo =\n        this.poolType === 'farm'\n          ? (await SarosAPIService.getFarmByPool(this.poolAddress.toBase58())) || undefined\n          : (await SarosAPIService.getStakeByPool(this.poolAddress.toBase58())) || undefined;\n    } catch (_error) {\n      throw SarosAMMError.PoolFetchFailed(this.poolType);\n    }\n  }\n\n  /**\n   * Get raw API info (direct from Saros API)\n   */\n  public getApiInfo(): SarosAPIFarmInfo | SarosAPIStakeInfo | undefined {\n    return this.apiInfo;\n  }\n\n  /**\n   * Get pool account\n   */\n  public getPoolAccount(): PoolAccount {\n    if (!this.poolAccount) {\n      throw SarosAMMError.PoolNotInitialized();\n    }\n    return this.poolAccount;\n  }\n\n  /**\n   * Stake tokens into the pool\n   *\n   * @returns Transaction to be signed and sent by the user\n   */\n  public async stake(params: StakeParams): Promise<Transaction> {\n    if (!this.poolAccount) {\n      throw SarosAMMError.PoolNotInitialized();\n    }\n\n    const { payer, amount } = params;\n    const transaction = new Transaction();\n\n    // Derive user pool address\n    const [userPoolAddress, userPoolNonce] = deriveFarmUserPoolAddress(\n      payer,\n      this.poolAddress,\n      this.farmProgram.programId\n    );\n\n    // Derive or use provided user staking token account\n    const userStakingTokenAccount =\n      params.userStakingTokenAccount || (await spl.getAssociatedTokenAddress(this.poolAccount.stakingTokenMint, payer));\n\n    // Check if user pool account exists, create if not\n    const userPoolAccountInfo = await this.connection.getAccountInfo(userPoolAddress);\n    if (!userPoolAccountInfo) {\n      const createUserPoolIx = await this.farmProgram.methods\n        .createUserPool(userPoolNonce)\n        .accounts({\n          user: payer,\n          pool: this.poolAddress,\n          userPool: userPoolAddress,\n          systemProgram: SystemProgram.programId,\n        })\n        .instruction();\n\n      transaction.add(createUserPoolIx);\n    }\n\n    // Create stake pool instruction\n    const stakeIx = await this.farmProgram.methods\n      .stakePool(new BN(amount.toString()))\n      .accounts({\n        pool: this.poolAddress,\n        poolStakingTokenAccount: this.poolAccount.stakingTokenAccount,\n        user: payer,\n        userPool: userPoolAddress,\n        userStakingTokenAccount,\n        tokenProgram: spl.TOKEN_PROGRAM_ID,\n      })\n      .instruction();\n\n    transaction.add(stakeIx);\n\n    // If there are rewards, stake pool reward for each\n    if (this.apiInfo?.rewards) {\n      for (const reward of this.apiInfo.rewards) {\n        const poolRewardAddress = new PublicKey(reward.poolRewardAddress);\n        const [userPoolRewardAddress, userPoolRewardNonce] = deriveFarmUserPoolRewardAddress(\n          payer,\n          poolRewardAddress,\n          this.farmProgram.programId\n        );\n\n        // Check if user pool reward exists, create if not\n        const userPoolRewardInfo = await this.connection.getAccountInfo(userPoolRewardAddress);\n        if (!userPoolRewardInfo) {\n          const createUserPoolRewardIx = await this.farmProgram.methods\n            .createUserPoolReward(userPoolRewardNonce)\n            .accounts({\n              user: payer,\n              poolReward: poolRewardAddress,\n              userPoolReward: userPoolRewardAddress,\n              systemProgram: SystemProgram.programId,\n            })\n            .instruction();\n\n          transaction.add(createUserPoolRewardIx);\n        }\n\n        // Stake pool reward\n        const stakePoolRewardIx = await this.farmProgram.methods\n          .stakePoolReward()\n          .accounts({\n            pool: this.poolAddress,\n            poolReward: poolRewardAddress,\n            user: payer,\n            userPool: userPoolAddress,\n            userPoolReward: userPoolRewardAddress,\n          })\n          .instruction();\n\n        transaction.add(stakePoolRewardIx);\n      }\n    }\n\n    return transaction;\n  }\n\n  /**\n   * Unstake tokens from the pool\n   *\n   * @returns Transaction to be signed and sent by the user\n   */\n  public async unstake(params: UnstakeParams): Promise<Transaction> {\n    if (!this.poolAccount) {\n      throw SarosAMMError.PoolNotInitialized();\n    }\n\n    const { payer, amount } = params;\n    const transaction = new Transaction();\n\n    // Derive addresses\n    const [userPoolAddress] = deriveFarmUserPoolAddress(payer, this.poolAddress, this.farmProgram.programId);\n    const [poolAuthority] = deriveFarmPoolAuthority(this.poolAddress, this.farmProgram.programId);\n\n    const userStakingTokenAccount =\n      params.userStakingTokenAccount || (await spl.getAssociatedTokenAddress(this.poolAccount.stakingTokenMint, payer));\n\n    // Unstake pool rewards first\n    if (this.apiInfo?.rewards) {\n      for (const reward of this.apiInfo.rewards) {\n        const poolRewardAddress = new PublicKey(reward.poolRewardAddress);\n        const [userPoolRewardAddress] = deriveFarmUserPoolRewardAddress(\n          payer,\n          poolRewardAddress,\n          this.farmProgram.programId\n        );\n\n        const unstakePoolRewardIx = await this.farmProgram.methods\n          .unstakePoolReward()\n          .accounts({\n            pool: this.poolAddress,\n            poolReward: poolRewardAddress,\n            user: payer,\n            userPool: userPoolAddress,\n            userPoolReward: userPoolRewardAddress,\n          })\n          .instruction();\n\n        transaction.add(unstakePoolRewardIx);\n      }\n    }\n\n    // Unstake pool\n    const unstakeIx = await this.farmProgram.methods\n      .unstakePool(new BN(amount.toString()))\n      .accounts({\n        pool: this.poolAddress,\n        poolAuthority,\n        poolStakingTokenAccount: this.poolAccount.stakingTokenAccount,\n        user: payer,\n        userPool: userPoolAddress,\n        userStakingTokenAccount,\n        tokenProgram: spl.TOKEN_PROGRAM_ID,\n      })\n      .instruction();\n\n    transaction.add(unstakeIx);\n\n    return transaction;\n  }\n\n  /**\n   * Claim rewards from a specific pool reward\n   *\n   * @returns Transaction to be signed and sent by the user\n   */\n  public async claimReward(params: ClaimRewardParams): Promise<Transaction> {\n    const { payer, poolRewardAddress } = params;\n    const transaction = new Transaction();\n\n    // Fetch pool reward to get reward token mint\n    const poolRewardAccount = await this.accounts.poolReward.fetch(poolRewardAddress);\n\n    // Derive addresses\n    const [userPoolRewardAddress] = deriveFarmUserPoolRewardAddress(\n      payer,\n      poolRewardAddress,\n      this.farmProgram.programId\n    );\n    const [poolRewardAuthority] = deriveFarmPoolRewardAuthority(poolRewardAddress, this.farmProgram.programId);\n\n    const userRewardTokenAccount =\n      params.userRewardTokenAccount || (await spl.getAssociatedTokenAddress(poolRewardAccount.rewardTokenMint, payer));\n\n    // Check if user reward token account exists, create if not\n    const userRewardAccountInfo = await this.connection.getAccountInfo(userRewardTokenAccount);\n    if (!userRewardAccountInfo) {\n      const createATAIx = spl.createAssociatedTokenAccountInstruction(\n        payer,\n        userRewardTokenAccount,\n        payer,\n        poolRewardAccount.rewardTokenMint\n      );\n      transaction.add(createATAIx);\n    }\n\n    // Claim reward\n    const claimIx = await this.farmProgram.methods\n      .claimReward()\n      .accounts({\n        poolReward: poolRewardAddress,\n        poolRewardAuthority,\n        poolRewardTokenAccount: poolRewardAccount.rewardTokenAccount,\n        user: payer,\n        userPoolReward: userPoolRewardAddress,\n        userRewardTokenAccount,\n        tokenProgram: spl.TOKEN_PROGRAM_ID,\n      })\n      .instruction();\n\n    transaction.add(claimIx);\n\n    return transaction;\n  }\n\n  /**\n   * Get user's staking position\n   */\n  public async getUserPosition(user: PublicKey): Promise<UserPosition> {\n    const [userPoolAddress] = deriveFarmUserPoolAddress(user, this.poolAddress, this.farmProgram.programId);\n\n    const userPoolAccount = await this.accounts.userPool.fetch(userPoolAddress);\n\n    const rewards = [];\n    if (this.apiInfo?.rewards) {\n      for (const reward of this.apiInfo.rewards) {\n        const poolRewardAddress = new PublicKey(reward.poolRewardAddress);\n        const [userPoolRewardAddress] = deriveFarmUserPoolRewardAddress(\n          user,\n          poolRewardAddress,\n          this.farmProgram.programId\n        );\n\n        try {\n          const userPoolRewardAccount = await this.accounts.userPoolReward.fetch(userPoolRewardAddress);\n\n          rewards.push({\n            poolRewardAddress,\n            userPoolRewardAddress,\n            rewardTokenMint: new PublicKey(reward.rewardTokenMint),\n            amount: BigInt(userPoolRewardAccount.amount.toString()),\n            rewardDebt: BigInt(userPoolRewardAccount.rewardDebt.toString()),\n            rewardPending: BigInt(userPoolRewardAccount.rewardPending.toString()),\n          });\n        } catch {\n          // Silently ignore if user pool reward doesn't exist yet\n        }\n      }\n    }\n\n    return {\n      userPoolAddress,\n      stakedAmount: BigInt(userPoolAccount.amount.toString()),\n      totalStaked: BigInt(userPoolAccount.totalStaked.toString()),\n      rewards,\n    };\n  }\n}\n"]}